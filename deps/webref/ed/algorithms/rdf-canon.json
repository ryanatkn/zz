{
  "spec": {
    "title": "RDF Dataset Canonicalization",
    "url": "https://w3c.github.io/rdf-canon/spec/"
  },
  "algorithms": [
    {
      "name": "4.4 Canonicalization Algorithm",
      "href": "https://w3c.github.io/rdf-canon/spec/#x4-4-canonicalization-algorithm",
      "html": "<a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-rdfc-1-0\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-rdfc-1-0-14\"><abbr title=\"RDF Canonicalization algorithm version 1.0\">RDFC-1.0</abbr></a> consists of several sub-algorithms.\n        These sub-algorithms are introduced in the following sub-sections.\n        First, we give a high level summary of <abbr title=\"RDF Canonicalization algorithm version 1.0\">RDFC-1.0</abbr>.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<strong>Initialization</strong>.\n          Initialize the state needed for the rest of the algorithm\n          using <a href=\"https://w3c.github.io/rdf-canon/spec/#canon-state\" class=\"sectionRef sec-ref\"><bdi class=\"secno\">4.2 </bdi>Canonicalization State</a>.\n          Also initialize the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-canonicalized-dataset\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canonicalized-dataset-7\">canonicalized dataset</a> using the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-input-dataset\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-input-dataset-11\">input dataset</a>\n          (which remains immutable)\n          the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-input-blank-node-identifier-map\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-input-blank-node-identifier-map-2\">input blank node identifier map</a>\n          (retaining blank node identifiers from the input if possible, otherwise assigning them arbitrarily);\n          the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-issued-identifiers-map\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-issued-identifiers-map-3\">issued identifiers map</a> from the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-canonical-issuer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canonical-issuer-2\">canonical issuer</a> is added upon completion of the algorithm."
        },
        {
          "html": "<strong>Compute first degree hashes</strong>.\n          Compute the first degree hash for each blank node in the dataset using <a href=\"https://w3c.github.io/rdf-canon/spec/#hash-1d-quads\" class=\"sectionRef sec-ref\"><bdi class=\"secno\">4.6 </bdi>Hash First Degree Quads</a>."
        },
        {
          "html": "<strong>Canonically label unique nodes</strong>.\n          Assign canonical identifiers via <a href=\"https://w3c.github.io/rdf-canon/spec/#issue-identifier\" class=\"sectionRef sec-ref\"><bdi class=\"secno\">4.5 </bdi>Issue Identifier Algorithm</a>,\n          in <a data-cite=\"XPATH-FUNCTIONS#codepoint-collation\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/xpath-functions/#codepoint-collation\" id=\"ref-for-index-term-unicode-code-point-order-4\">Unicode code point order</a>, to each blank node whose first degree hash is unique."
        },
        {
          "html": "<strong>Compute N-degree hashes for non-unique nodes</strong>.\n          For each repeated first degree hash (proceeding in <a data-cite=\"XPATH-FUNCTIONS#codepoint-collation\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/xpath-functions/#codepoint-collation\" id=\"ref-for-index-term-unicode-code-point-order-5\">Unicode code point order</a>),\n          compute the N-degree hash via <a href=\"https://w3c.github.io/rdf-canon/spec/#hash-nd-quads\" class=\"sectionRef sec-ref\"><bdi class=\"secno\">4.8 </bdi>Hash N-Degree Quads</a>\n          of every unlabeled blank node that corresponds to the given repeated hash."
        },
        {
          "html": "<strong>Canonically label remaining nodes</strong>.\n          In <a data-cite=\"XPATH-FUNCTIONS#codepoint-collation\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/xpath-functions/#codepoint-collation\" id=\"ref-for-index-term-unicode-code-point-order-6\">Unicode code point order</a> of the N-degree hashes,\n          issue canonical identifiers to each corresponding blank node using\n          <a href=\"https://w3c.github.io/rdf-canon/spec/#issue-identifier\" class=\"sectionRef sec-ref\"><bdi class=\"secno\">4.5 </bdi>Issue Identifier Algorithm</a>.\n          If more than one node produces the same N-degree hash,\n          the order in which these nodes receive a canonical identifier does not matter."
        },
        {
          "html": "<strong>Finish</strong>.\n          Return the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-serialized-canonical-form\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-serialized-canonical-form-3\">serialized canonical form</a> of the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-canonicalized-dataset\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canonicalized-dataset-8\">canonicalized dataset</a>.\n          Alternatively, return the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-canonicalized-dataset\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canonicalized-dataset-9\">canonicalized dataset</a> containing\n          the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-input-blank-node-identifier-map\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-input-blank-node-identifier-map-3\">input blank node identifier map</a> and <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-issued-identifiers-map\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-issued-identifiers-map-4\">issued identifiers map</a>."
        }
      ]
    },
    {
      "name": "4.4 Canonicalization Algorithm",
      "href": "https://w3c.github.io/rdf-canon/spec/#x4-4-canonicalization-algorithm",
      "html": "The following algorithm will run with a minimal number of iterations in each step\n        for typical <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-input-dataset\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-input-dataset-13\">input datasets</a>.\n        In some extreme cases, the algorithm can behave poorly, particularly in <a href=\"https://w3c.github.io/rdf-canon/spec/#ca.5\">Step 5</a>.\n        Implementations <em class=\"rfc2119\">MUST</em> defend against potential denial-of-service attacks\n        by raising suitable exceptions and terminating early.\n        See <a href=\"https://w3c.github.io/rdf-canon/spec/#dataset-poisoning\" class=\"sec-ref\"><bdi class=\"secno\">7.1 </bdi>Dataset Poisoning</a> for further information.",
      "rationale": "create",
      "steps": [
        {
          "html": "Create the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-canonicalization-state\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canonicalization-state-2\">canonicalization state</a>.\n          If the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-input-dataset\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-input-dataset-14\">input dataset</a> is an N-Quads document,\n          parse that document into a dataset in the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-canonicalized-dataset\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canonicalized-dataset-11\">canonicalized dataset</a>,\n          retaining any blank node identifiers used within that document\n          in the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-input-blank-node-identifier-map\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-input-blank-node-identifier-map-4\">input blank node identifier map</a>;\n          otherwise arbitrary identifiers are assigned for each\n          blank node.\n          <details>\n            <summary>Explanation</summary>\n            <p>This has the effect of initializing the\n              <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-blank-node-to-quads-map\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-blank-node-to-quads-map-3\">blank node to quads map</a>,\n              and the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-hash-to-blank-nodes-map\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-hash-to-blank-nodes-map-2\">hash to blank nodes map</a>,\n              as well as instantiating a new <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-canonical-issuer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canonical-issuer-5\">canonical issuer</a>.</p>\n            <p>After this algorithm completes,\n              the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-input-blank-node-identifier-map\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-input-blank-node-identifier-map-5\">input blank node identifier map</a> state\n              and <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-canonical-issuer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canonical-issuer-6\">canonical issuer</a> may be used to\n              correlate blank nodes used in the\n              <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-input-dataset\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-input-dataset-15\">input dataset</a> with both their original identifiers,\n              and associated canonical identifiers.</p>\n          </details>"
        },
        {
          "html": "For every <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-quad\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-quad-7\">quad</a> <var>Q</var> in <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-input-dataset\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-input-dataset-16\">input dataset</a>:",
          "rationale": "for",
          "steps": [
            {
              "html": "For each <a data-cite=\"RDF11-CONCEPTS#dfn-blank-node\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node\" id=\"ref-for-index-term-blank-nodes-15\">blank node</a> that is a component of <var>Q</var>,\n              add a reference to <var>Q</var> from the\n              <a data-link-type=\"dfn\" data-link-for=\"map\" data-xref-for=\"map\" data-lt=\"entry\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"map-entry\" href=\"https://infra.spec.whatwg.org/#map-entry\" id=\"ref-for-index-term-entry-for-map-1\">map entry</a> for the\n              <a data-cite=\"RDF11-CONCEPTS#dfn-blank-node-identifier\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier\" id=\"ref-for-index-term-blank-node-identifiers-19\">blank node identifier</a> <var>identifier</var>\n              in the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-blank-node-to-quads-map\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-blank-node-to-quads-map-4\">blank node to quads map</a>,\n              creating a new entry if necessary,\n              using the identifier for the blank node found in the\n              <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-input-blank-node-identifier-map\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-input-blank-node-identifier-map-6\">input blank node identifier map</a>.\n              <details>\n                <summary>Explanation</summary>\n                <p>This establishes the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-blank-node-to-quads-map\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-blank-node-to-quads-map-5\">blank node to quads map</a>,\n                  relating each <a data-cite=\"RDF11-CONCEPTS#dfn-blank-node\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node\" id=\"ref-for-index-term-blank-nodes-16\">blank node</a> with the set of <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-quad\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-quad-8\">quads</a>\n                  of which it is a component,\n                  via the map for each blank node in the input dataset to its assigned identifier.</p>\n                \n              </details>"
            }
          ]
        },
        {
          "html": "For each <a data-link-type=\"dfn\" data-link-for=\"map\" data-xref-for=\"map\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"map-key\" href=\"https://infra.spec.whatwg.org/#map-key\" id=\"ref-for-index-term-key-for-map-1\">key</a> <var>n</var>\n          in the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-blank-node-to-quads-map\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-blank-node-to-quads-map-7\">blank node to quads map</a>:\n          <details>\n            <summary>Explanation</summary>\n            <p>This step creates a hash for every blank node in the input document.\n              Some blank nodes will lead to a unique hash,\n              while other blank nodes may share a common hash.</p>\n          </details>",
          "rationale": "create",
          "steps": [
            {
              "html": "Create a <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-hash\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-hash-5\">hash</a>, <var>h<sub>f</sub>(n)</var>,\n              for <var>n</var> according to the\n              <a href=\"https://w3c.github.io/rdf-canon/spec/#hash-1d-quads\">Hash First Degree Quads algorithm</a>."
            },
            {
              "html": "Append <var>n</var> to the value associated to <var>h<sub>f</sub>(n)</var> in\n              <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-hash-to-blank-nodes-map\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-hash-to-blank-nodes-map-3\">hash to blank nodes map</a>,\n              creating a new entry if necessary."
            }
          ]
        },
        {
          "html": "For each <var>hash</var> to <var>identifier list</var>\n          <a data-link-type=\"dfn\" data-link-for=\"map\" data-xref-for=\"map\" data-lt=\"entry\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"map-entry\" href=\"https://infra.spec.whatwg.org/#map-entry\" id=\"ref-for-index-term-entry-for-map-2\">map entry</a> in\n          <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-hash-to-blank-nodes-map\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-hash-to-blank-nodes-map-4\">hash to blank nodes map</a>, <a data-cite=\"XPATH-FUNCTIONS#codepoint-collation\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/xpath-functions/#codepoint-collation\" id=\"ref-for-index-term-unicode-code-point-order-7\">code point ordered</a> by <var>hash</var>:\n          <details>\n            <summary>Explanation</summary>\n            <p>This step establishes the canonical identifier for blank nodes having\n              a unique hash, which are recorded in the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-canonical-issuer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canonical-issuer-7\">canonical issuer</a>.</p>\n          </details>",
          "rationale": "if",
          "steps": [
            {
              "html": "If <var>identifier list</var> has more than one entry,\n              continue to the next mapping."
            },
            {
              "html": "Use the\n              <a href=\"https://w3c.github.io/rdf-canon/spec/#issue-identifier\">Issue Identifier algorithm</a>,\n              passing <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-canonical-issuer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canonical-issuer-8\">canonical issuer</a> and the\n              single <a data-cite=\"RDF11-CONCEPTS#dfn-blank-node-identifier\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier\" id=\"ref-for-index-term-blank-node-identifiers-20\">blank node identifier</a>, <var>identifier</var> in\n              <var>identifier list</var> to issue a\n              canonical replacement identifier for <var>identifier</var>."
            },
            {
              "html": "Remove the <a data-link-type=\"dfn\" data-link-for=\"map\" data-xref-for=\"map\" data-lt=\"entry\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"map-entry\" href=\"https://infra.spec.whatwg.org/#map-entry\" id=\"ref-for-index-term-entry-for-map-3\">map entry</a> for <var>hash</var> from the\n              <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-hash-to-blank-nodes-map\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-hash-to-blank-nodes-map-5\">hash to blank nodes map</a>."
            }
          ]
        },
        {
          "html": "For each <var>hash</var> to <var>identifier list</var>\n          <a data-link-type=\"dfn\" data-link-for=\"map\" data-xref-for=\"map\" data-lt=\"entry\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"map-entry\" href=\"https://infra.spec.whatwg.org/#map-entry\" id=\"ref-for-index-term-entry-for-map-4\">map entry</a> in\n          <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-hash-to-blank-nodes-map\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-hash-to-blank-nodes-map-6\">hash to blank nodes map</a>, <a data-cite=\"XPATH-FUNCTIONS#codepoint-collation\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/xpath-functions/#codepoint-collation\" id=\"ref-for-index-term-unicode-code-point-order-8\">code point ordered</a> by\n          <var>hash</var>:\n          <details>\n            <summary>Explanation</summary>\n            <p>This step establishes the canonical identifier for blank nodes having\n              a shared hash.\n              This is done by creating unique blank node identifiers for all\n              blank nodes traversed by the <a href=\"https://w3c.github.io/rdf-canon/spec/#hash-nd-quads\">Hash N-Degree Quads algorithm</a>,\n              running through each blank node without a canonical identifier in the order\n              of the hashes established in the previous step.</p>\n          </details>\n          <details>\n            <summary>Logging</summary>\n            <p>Log <var>hash</var> and <var>identifier list</var> for this iteration.</p>\n            <pre class=\"logging yaml nohighlight\"># Hash and Identifier List for each iteration of step 5 using shared hashes example\nca:\n  <span class=\"comment\">...</span>\n  ca.5:\n    log point: Calculate hashes for identifiers with shared hashes (4.4.3 (5)).\n    with:\n      - hash: 3b26142829b8887d011d779079a243bd61ab53c3990d550320a17b59ade6ba36\n        identifier list: [ \"e0\", \"e1\"]\n    <span class=\"comment\">...</span>\n  <span class=\"comment\">...</span></pre>\n          </details>",
          "rationale": "create",
          "steps": [
            {
              "html": "Create <var>hash path list</var> where each item will be a result\n              of running the\n              <a href=\"https://w3c.github.io/rdf-canon/spec/#hash-nd-quads\">Hash N-Degree Quads algorithm</a>.\n              <details>\n                <summary>Explanation</summary>\n                <p>This list will be populated in step <a href=\"https://w3c.github.io/rdf-canon/spec/#ca.5.2\">5.2</a>, and will establish an order for those blank nodes\n                  sharing a common first-degree hash.</p>\n              </details>"
            },
            {
              "html": "For each <a data-cite=\"RDF11-CONCEPTS#dfn-blank-node-identifier\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier\" id=\"ref-for-index-term-blank-node-identifiers-21\">blank node identifier</a>\n              <var>n</var> in <var>identifier list</var>:",
              "rationale": "if",
              "steps": [
                {
                  "html": "If a canonical identifier has already been issued for\n                  <var>n</var>, continue to the next\n                  <a data-cite=\"RDF11-CONCEPTS#dfn-blank-node-identifier\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier\" id=\"ref-for-index-term-blank-node-identifiers-22\">blank node identifier</a>."
                },
                {
                  "html": "Create <var>temporary issuer</var>, an\n                  <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-identifier-issuer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-identifier-issuer-5\">identifier issuer</a> initialized with the prefix\n                  <code>b</code>."
                },
                {
                  "html": "Use the\n                  <a href=\"https://w3c.github.io/rdf-canon/spec/#issue-identifier\">Issue Identifier algorithm</a>,\n                  passing <var>temporary issuer</var> and <var>n</var>, to\n                  issue a new temporary <a data-cite=\"RDF11-CONCEPTS#dfn-blank-node-identifier\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier\" id=\"ref-for-index-term-blank-node-identifiers-23\">blank node identifier</a> <var>b<sub>n</sub></var>\n                  to <var>n</var>."
                },
                {
                  "html": "Run the\n                  <a href=\"https://w3c.github.io/rdf-canon/spec/#hash-nd-quads\">Hash N-Degree Quads algorithm</a>,\n                  passing the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-canonicalization-state\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canonicalization-state-3\">canonicalization state</a>,\n                  <var>n</var> for <var>identifier</var>, and\n                  <var>temporary issuer</var>,\n                  appending the\n                  result to the <var>hash path list</var>.\n                  <details>\n                    <summary>Logging</summary>\n                    <p>Include logs for each call to <a href=\"https://w3c.github.io/rdf-canon/spec/#hash-nd-quads\">Hash N-Degree Quads algorithm</a>.</p>\n                    <pre class=\"logging yaml nohighlight\"># Logs from calls to Hash N-Degree Quads algorithm for shared hashes example\nca:\n  <span class=\"comment\">...</span>\n  ca.5:\n    log point: Calculate hashes for identifiers with shared hashes (4.4.3 (5)).\n    with:\n      - hash: 3b26142829b8887d011d779079a243bd61ab53c3990d550320a17b59ade6ba36\n        identifier list: [ \"e0\", \"e1\"]\n        ca.5.2:\n          log point: Calculate hashes for identifiers with shared hashes (4.4.3 (5.2)).\n          with:\n            - identifier: e0\n              hndq:\n                log point: Hash N-Degree Quads function (4.8.3).\n                identifier: e0\n                issuer: {e0: b0}\n                <span class=\"comment\">...</span>\n            <span class=\"comment\">...</span>\n        <span class=\"comment\">...</span>\n  <span class=\"comment\">...</span></pre>\n                  </details>"
                }
              ]
            },
            {
              "html": "For each <var>result</var> in the <var>hash path list</var>,\n              <a data-cite=\"XPATH-FUNCTIONS#codepoint-collation\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/xpath-functions/#codepoint-collation\" id=\"ref-for-index-term-unicode-code-point-order-9\">code point ordered</a> by the <var>hash</var> in <var>result</var>:\n              <details>\n                <summary>Explanation</summary>\n                <p>The previous step created temporary identifiers for the\n                  blank nodes sharing a common first degree hash,\n                  which is now used to generate their canonical identifiers.</p>\n              </details>",
              "rationale": "for",
              "steps": [
                {
                  "html": "For each <a data-cite=\"RDF11-CONCEPTS#dfn-blank-node-identifier\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier\" id=\"ref-for-index-term-blank-node-identifiers-24\">blank node identifier</a>,\n                  <var>existing identifier</var>, that was issued a temporary\n                  identifier by <var>identifier issuer</var> in <var>result</var>,\n                  issue a canonical identifier,\n                  in the same order,\n                  using the <a href=\"https://w3c.github.io/rdf-canon/spec/#issue-identifier\">Issue Identifier algorithm</a>,\n                  passing <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-canonical-issuer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canonical-issuer-9\">canonical issuer</a> and <var>existing identifier</var>.\n                  <details>\n                    <summary>Explanation</summary>\n                    <p>In <a href=\"https://w3c.github.io/rdf-canon/spec/#ca.5.2\">Step 5.2</a>,\n                      <var>hash path list</var> was created with an ordered\n                      set of results.\n                      Each result contained a <var>temporary issuer</var>\n                      which recorded temporary identifiers associated with\n                      a particular <a data-cite=\"RDF11-CONCEPTS#dfn-blank-node-identifier\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier\" id=\"ref-for-index-term-blank-node-identifiers-25\">blank node identifier</a> in\n                      <var>identifier list</var>.\n                      This step processes each returned <var>temporary issuer</var>,\n                      in order, and allocates canonical identifiers\n                      to the temporary identifier mappings contained\n                      within each <var>temporary issuer</var>,\n                      creating a full order on the remaining blank nodes\n                      with unissued canonical identifiers.\n                    </p>\n                  </details>"
                }
              ]
            }
          ]
        },
        {
          "html": "Add the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-issued-identifiers-map\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-issued-identifiers-map-6\">issued identifiers map</a>\n          from the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-canonical-issuer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canonical-issuer-10\">canonical issuer</a> to the\n          <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-canonicalized-dataset\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canonicalized-dataset-12\">canonicalized dataset</a>.\n          <details>\n            <summary>Explanation</summary>\n            <p>This step adds the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-issued-identifiers-map\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-issued-identifiers-map-7\">issued identifiers map</a>\n              from the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-canonical-issuer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canonical-issuer-11\">canonical issuer</a> to the\n              <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-canonicalized-dataset\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canonicalized-dataset-13\">canonicalized dataset</a>, the <a data-link-type=\"dfn\" data-link-for=\"map\" data-xref-for=\"map\" data-lt=\"key\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"map-key\" href=\"https://infra.spec.whatwg.org/#map-key\" id=\"ref-for-index-term-key-for-map-2\">keys</a> in the\n              <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-issued-identifiers-map\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-issued-identifiers-map-8\">issued identifiers map</a> are <a data-link-type=\"dfn\" data-link-for=\"map\" data-xref-for=\"map\" data-lt=\"entry\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"map-entry\" href=\"https://infra.spec.whatwg.org/#map-entry\" id=\"ref-for-index-term-entry-for-map-5\">map entries</a> in the\n              <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-input-blank-node-identifier-map\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-input-blank-node-identifier-map-7\">input blank node identifier map</a>.</p>\n          </details>\n          <details>\n            <summary>Logging</summary>\n            <p>Log the state of the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-canonical-issuer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canonical-issuer-12\">canonical issuer</a> at the completion of the algorithm.</p>\n            <pre class=\"logging yaml nohighlight\"># Canonical issuer state after step 6 for shared hashes example\nca:\n  <span class=\"comment\">...</span>\n  ca.6:\n    log point: Issued identifiers map (4.4.3 (6)).\n    issued identifiers map: {e2: c14n0, e3: c14n1, e1: c14n2, e0: c14n3}</pre>\n          </details>"
        },
        {
          "html": "Return the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-serialized-canonical-form\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-serialized-canonical-form-4\">serialized canonical form</a>\n          of the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-canonicalized-dataset\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canonicalized-dataset-14\">canonicalized dataset</a>.\n          Upon request, alternatively (or additionally) return the\n          <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-canonicalized-dataset\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canonicalized-dataset-15\">canonicalized dataset</a> itself, which includes the\n          <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-input-blank-node-identifier-map\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-input-blank-node-identifier-map-8\">input blank node identifier map</a>, and\n          <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-issued-identifiers-map\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-issued-identifiers-map-9\">issued identifiers map</a> from the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-canonical-issuer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canonical-issuer-13\">canonical issuer</a>.\n          \n          <details>\n            <summary>Explanation</summary>\n            <p>The <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-serialized-canonical-form\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-serialized-canonical-form-5\">serialized canonical form</a> is an N-Quads\n              document where the blank node identifiers are taken\n              from the canonical identifiers associated with each blank node.</p>\n            <p>The <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-canonicalized-dataset\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canonicalized-dataset-17\">canonicalized dataset</a> is composed of the original\n              <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-input-dataset\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-input-dataset-17\">input dataset</a>, the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-input-blank-node-identifier-map\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-input-blank-node-identifier-map-9\">input blank node identifier map</a>,\n              containing identifiers for each blank node in the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-input-dataset\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-input-dataset-18\">input dataset</a>,\n              and the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-canonical-issuer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canonical-issuer-14\">canonical issuer</a>,\n              containing an <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-issued-identifiers-map\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-issued-identifiers-map-10\">issued identifiers map</a>\n              mapping the identifiers in the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-input-blank-node-identifier-map\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-input-blank-node-identifier-map-10\">input blank node identifier map</a>\n              to their canonical identifiers.\n            </p>\n          </details>"
        }
      ]
    },
    {
      "name": "4.5 Issue Identifier Algorithm",
      "href": "https://w3c.github.io/rdf-canon/spec/#x4-5-issue-identifier-algorithm",
      "html": "The algorithm takes an <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-identifier-issuer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-identifier-issuer-6\">identifier issuer</a> <var>I</var> and an\n        <var>existing identifier</var> as inputs. The output is a new\n        <var>issued identifier</var>. The steps of the algorithm are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "If there is a\n          <a data-link-type=\"dfn\" data-link-for=\"map\" data-xref-for=\"map\" data-lt=\"entry\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"map-entry\" href=\"https://infra.spec.whatwg.org/#map-entry\" id=\"ref-for-index-term-entry-for-map-6\">map entry</a> for <var>existing identifier</var> in\n          <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-issued-identifiers-map\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-issued-identifiers-map-12\">issued identifiers map</a> of <var>I</var>,\n          return it."
        },
        {
          "html": "Generate <var>issued identifier</var> by concatenating\n          <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-identifier-prefix\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-identifier-prefix-4\">identifier prefix</a> with the string value of\n          <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-identifier-counter\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-identifier-counter-2\">identifier counter</a>."
        },
        {
          "html": "Add an <a data-link-type=\"dfn\" data-link-for=\"map\" data-xref-for=\"map\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"map-entry\" href=\"https://infra.spec.whatwg.org/#map-entry\" id=\"ref-for-index-term-entry-for-map-7\">entry</a>\n          mapping <var>existing identifier</var> to <var>issued identifier</var>\n          to the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-issued-identifiers-map\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-issued-identifiers-map-13\">issued identifiers map</a> of <var>I</var>."
        },
        {
          "html": "Increment <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-identifier-counter\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-identifier-counter-3\">identifier counter</a>."
        },
        {
          "html": "Return <var>issued identifier</var>."
        }
      ]
    },
    {
      "name": "reference blank node identifier",
      "href": "https://w3c.github.io/rdf-canon/spec/#dfn-reference-blank-node-identifier",
      "html": "This algorithm takes the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-canonicalization-state\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canonicalization-state-4\">canonicalization state</a> and a\n        <dfn id=\"dfn-reference-blank-node-identifier\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">reference blank node identifier</dfn> as inputs.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "Initialize <dfn class=\"no-export\" data-noexport=\"\" data-plurals=\"nquad\" id=\"dfn-nquads\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">nquads</dfn> to an empty <a data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list\" data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-index-term-list-2\">list</a>.\n          It will be used to store quads in <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-canonical-n-quads\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canonical-n-quads-8\">canonical n-quads form</a>."
        },
        {
          "html": "Get the <a data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list\" data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-index-term-list-3\">list</a> of <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-quad\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-quad-11\">quads</a> <var>quads</var>\n          from the <a data-link-type=\"dfn\" data-link-for=\"map\" data-xref-for=\"map\" data-lt=\"entry\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"map-entry\" href=\"https://infra.spec.whatwg.org/#map-entry\" id=\"ref-for-index-term-entry-for-map-8\">map entry</a> for\n          <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-reference-blank-node-identifier\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-reference-blank-node-identifier-1\">reference blank node identifier</a> in the\n          <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-blank-node-to-quads-map\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-blank-node-to-quads-map-8\">blank node to quads map</a>."
        },
        {
          "html": "For each <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-quad\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-quad-12\">quad</a> <var>quad</var> in <var>quads</var>:",
          "rationale": "serialize",
          "steps": [
            {
              "html": "Serialize the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-quad\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-quad-13\">quad</a> in <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-canonical-n-quads\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canonical-n-quads-9\">canonical n-quads form</a> with the\n              following special rule:",
              "rationale": "if",
              "steps": [
                {
                  "html": "If any component in <var>quad</var> is an\n                  <a data-cite=\"RDF11-CONCEPTS#dfn-blank-node\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node\" id=\"ref-for-index-term-blank-nodes-18\">blank node</a>, then serialize it using a\n                  special identifier as follows:",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "If the <a data-cite=\"RDF11-CONCEPTS#dfn-blank-node\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node\" id=\"ref-for-index-term-blank-nodes-19\">blank node</a>'s existing\n                    <a data-cite=\"RDF11-CONCEPTS#dfn-blank-node-identifier\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier\" id=\"ref-for-index-term-blank-node-identifiers-32\">blank node identifier</a> matches the\n                    <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-reference-blank-node-identifier\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-reference-blank-node-identifier-2\">reference blank node identifier</a> then use the\n                    <a data-cite=\"RDF11-CONCEPTS#dfn-blank-node-identifier\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier\" id=\"ref-for-index-term-blank-node-identifiers-33\">blank node identifier</a> <code>a</code>,\n                    otherwise, use the <a data-cite=\"RDF11-CONCEPTS#dfn-blank-node-identifier\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier\" id=\"ref-for-index-term-blank-node-identifiers-34\">blank node identifier</a>\n                    <code>z</code>."
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "html": "Sort <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-nquads\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-nquads-1\">nquads</a> in <a data-cite=\"XPATH-FUNCTIONS#codepoint-collation\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/xpath-functions/#codepoint-collation\" id=\"ref-for-index-term-unicode-code-point-order-11\">Unicode code point order</a>."
        },
        {
          "html": "Return the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-hash\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-hash-8\">hash</a> that results from passing the sorted\n          and concatenated <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-nquads\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-nquads-2\">nquads</a> through the\n          <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-hash-algorithm\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-hash-algorithm-4\">hash algorithm</a>.\n          <details>\n            <summary>Logging</summary>\n            <p>Log the inputs and result of running this algorithm.</p>\n            <pre class=\"logging yaml nohighlight\"># Inputs and hash result for the Hash First Degree Hash algorithm for unique hashes example\nh1dq:\n  log point: Hash First Degree Quads function (4.6.3).\n  nquads:\n    - &lt;http://example.com/#p&gt; &lt;http://example.com/#q&gt; _:a .\n    - _:a &lt;http://example.com/#s&gt; &lt;http://example.com/#u&gt; .\n  hash: 21d1dd5ba21f3dee9d76c0c00c260fa6f5d5d65315099e553026f4828d0dc77a</pre>\n          </details>"
        }
      ]
    },
    {
      "name": "4.7 Hash Related Blank Node",
      "href": "https://w3c.github.io/rdf-canon/spec/#x4-7-hash-related-blank-node",
      "html": "An <em>identifier</em> for a <a data-cite=\"RDF11-CONCEPTS#dfn-blank-node\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node\" id=\"ref-for-index-term-blank-nodes-21\">blank node</a>, <var>related</var>,\n        which is a component of some <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-quad\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-quad-15\">quad</a>, is used along\n        with information describing its position within the quad to create\n        a representation of that blank node within the quad,\n        which is then hashed.\n        The identifier is first found from the following:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "An issued identifier from <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-canonical-issuer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canonical-issuer-15\">canonical issuer</a> in the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-canonicalization-state\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canonicalization-state-5\">canonicalization state</a>,"
        },
        {
          "html": "An issued identifier from <var>issuer</var>, or"
        },
        {
          "html": "the result of the\n          <a href=\"https://w3c.github.io/rdf-canon/spec/#hash-nd-quads-algorithm\">Hash N-Degree Quads algorithm</a>\n          for <var>related</var>."
        }
      ]
    },
    {
      "name": "4.7 Hash Related Blank Node",
      "href": "https://w3c.github.io/rdf-canon/spec/#x4-7-hash-related-blank-node",
      "html": "This algorithm creates a <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-hash\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-hash-10\">hash</a> to identify how one\n        <a data-cite=\"RDF11-CONCEPTS#dfn-blank-node\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node\" id=\"ref-for-index-term-blank-nodes-23\">blank node</a> is related to another. It takes the\n        <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-canonicalization-state\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canonicalization-state-6\">canonicalization state</a>, a <var>related</var>\n        <a data-cite=\"RDF11-CONCEPTS#dfn-blank-node-identifier\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier\" id=\"ref-for-index-term-blank-node-identifiers-36\">blank node identifier</a>, a <var>quad</var>, an\n        <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-identifier-issuer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-identifier-issuer-7\">identifier issuer</a>, <var>issuer</var>, and a\n        <a data-cite=\"INFRA#string\" data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#string\" id=\"ref-for-index-term-string-4\">string</a> <var>position</var> as inputs.",
      "rationale": "initialize",
      "steps": [
        {
          "html": "Initialize a <a data-cite=\"INFRA#string\" data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#string\" id=\"ref-for-index-term-string-5\">string</a> <var>input</var> to the value of\n          <var>position</var>."
        },
        {
          "html": "If <var>position</var> is not <code>g</code>, append\n          <code>&lt;</code>, the value of the <a data-cite=\"RDF11-CONCEPTS#dfn-predicate\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/rdf11-concepts/#dfn-predicate\" id=\"ref-for-index-term-predicate-5\">predicate</a> in\n          <var>quad</var>, and <code>&gt;</code> to <var>input</var>."
        },
        {
          "html": "If there is a canonical identifier for <var>related</var>,\n          or an identifier issued by <var>issuer</var>,\n          append the string <code>_:</code>, followed by that identifier (using the canonical\n          identifier if present, otherwise the one issued by <var>issuer</var>) to\n          <var>input</var>.\n          <details>\n            <summary>Explanation</summary>\n            <p>If a canonical identifier was already issued for <var>related</var>,\n              it will be in the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-canonical-issuer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canonical-issuer-17\">canonical issuer</a> contained within\n              <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-canonicalization-state\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canonicalization-state-7\">canonicalization state</a>.\n              Otherwise, the temporary <var>issuer</var> instance may already\n              have a mapping for <var>related</var>.</p>\n          </details>"
        },
        {
          "html": "Otherwise,\n          append the result of the\n          <a href=\"https://w3c.github.io/rdf-canon/spec/#hash-1d-quads\">Hash First Degree Quads algorithm</a>,\n          passing <var>related</var> to <var>input</var>.\n          <details>\n            <summary>Explanation</summary>\n            <p>If no identifier, canonical or temporary, has already been issued,\n              a new identifier is created using the\n              <a href=\"https://w3c.github.io/rdf-canon/spec/#hash-1d-quads\">Hash First Degree Quads algorithm</a>.</p>\n            <p>Note that <a href=\"https://w3c.github.io/rdf-canon/spec/#hash-1d-quads\">Hash First Degree Quads algorithm</a>\n              has already been called on all blank nodes in step <a href=\"https://w3c.github.io/rdf-canon/spec/#ca.3\">3</a>\n              of the <a href=\"https://w3c.github.io/rdf-canon/spec/#canon-algorithm\">Canonicalization algorithm</a>.\n              Implementations should consider reusing a previously determined result rather than execute the\n              <a href=\"https://w3c.github.io/rdf-canon/spec/#hash-1d-quads\">Hash First Degree Quads algorithm</a> again.</p>\n          </details>"
        },
        {
          "html": "Return the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-hash\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-hash-11\">hash</a> that results from passing <var>input</var>\n          through the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-hash-algorithm\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-hash-algorithm-5\">hash algorithm</a>.\n          <details>\n            <summary>Explanation</summary>\n            <p>This resulting string is used to generate a hash; in this respect, it is similar to\n              the <a href=\"https://w3c.github.io/rdf-canon/spec/#hash-1d-quads\">Hash First Degree Quads algorithm</a> which\n              uses the serialization of <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-quad\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-quad-16\">quads</a> in <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-nquads\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-nquads-3\">nquads</a> for hashing. For the sake of consistency, the\n              <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-nquads\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-nquads-4\">nquad</a> representation of <var>identifier</var> is used in this step, hence the\n              appearance of the <code>_:</code> string.</p>\n          </details>\n          <details>\n            <summary>Logging</summary>\n            <p>Log the inputs and result of running this algorithm.</p>\n            <pre class=\"logging yaml nohighlight\"># Inputs and hash result for the Hash Related Blank algorithm for shared hashes example\nhndq3.1:\n  log point: Hash related bnode component (4.8.3 (3.1))\n  with:\n    - position: o\n      related: e2\n      input: \"o&lt;http://example.com/#p&gt;_:c14n0\"\n      hash: 29cf7e22790bc2ed395b81b3933e5329fc7b25390486085cac31ce7252ca60fa</pre>\n          </details>"
        }
      ]
    },
    {
      "name": "4.8 Hash N-Degree Quads",
      "href": "https://w3c.github.io/rdf-canon/spec/#x4-8-hash-n-degree-quads",
      "html": "For clarity, we consider a <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-gossip-path\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-gossip-path-4\">gossip path</a> encoded via the string <var>s</var>\n        to be shortest provided that:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "The length of <var>s</var> is less than or equal to the length\n          of any other gossip path string <var>s′</var>."
        },
        {
          "html": "If <var>s</var> and <var>s′</var> have the same length (as strings),\n          then <var>s</var> is <a data-cite=\"XPATH-FUNCTIONS#codepoint-collation\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/xpath-functions/#codepoint-collation\" id=\"ref-for-index-term-unicode-code-point-order-12\">code point ordered</a> less than or equal to <var>s′</var>."
        }
      ]
    },
    {
      "name": "4.8 Hash N-Degree Quads",
      "href": "https://w3c.github.io/rdf-canon/spec/#x4-8-hash-n-degree-quads",
      "html": "The inputs to this algorithm are the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-canonicalization-state\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canonicalization-state-8\">canonicalization state</a>,\n        the <var>identifier</var> for the <a data-cite=\"RDF11-CONCEPTS#dfn-blank-node\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node\" id=\"ref-for-index-term-blank-nodes-27\">blank node</a> to\n        recursively hash quads for, and path identifier <var>issuer</var> which is\n        an <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-identifier-issuer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-identifier-issuer-9\">identifier issuer</a> that issues temporary\n        <a data-cite=\"RDF11-CONCEPTS#dfn-blank-node-identifier\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier\" id=\"ref-for-index-term-blank-node-identifiers-37\">blank node identifier</a>s. The output from this algorithm\n        will be a <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-hash\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-hash-17\">hash</a> and the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-identifier-issuer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-identifier-issuer-10\">identifier issuer</a> used\n        to help generate it.",
      "rationale": "create",
      "steps": [
        {
          "html": "Create a new <a data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ordered-map\" id=\"ref-for-index-term-map-5\">map</a> <var>H<sub>n</sub></var>\n          for relating hashes to related <a data-cite=\"RDF11-CONCEPTS#dfn-blank-node\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node\" id=\"ref-for-index-term-blank-nodes-28\">blank nodes</a>."
        },
        {
          "html": "Get a reference, <var>quads</var>, to the list of <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-quad\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-quad-18\">quads</a>\n          from the <a data-link-type=\"dfn\" data-link-for=\"map\" data-xref-for=\"map\" data-lt=\"entry\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"map-entry\" href=\"https://infra.spec.whatwg.org/#map-entry\" id=\"ref-for-index-term-entry-for-map-11\">map entry</a>\n          for <var>identifier</var>\n          in the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-blank-node-to-quads-map\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-blank-node-to-quads-map-11\">blank node to quads map</a>.\n          <details>\n            <summary>Explanation</summary>\n            <p><var>quads</var> is the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-mention-set\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-mention-set-5\">mention set</a> of <var>identifier</var>.</p>\n          </details>\n          <details>\n            <summary>Logging</summary>\n            <p>Log the quads from the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-mention-set\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-mention-set-6\">mention set</a> of <var>identifier</var>.</p>\n            <pre class=\"logging yaml nohighlight\"># Inputs for the Hash N-Degree Quads algorithm for double circle example\nhndq:\n  identifier: e0\n  log point: Hash N-Degree Quads function (4.8.3).\n  issuer: {e0: b0}\n  hndq.2:\n    log point: Quads for identifier (4.8.3 (2)).\n    quads:\n    - _:e0 &lt;http://example.org/vocab#next&gt; _:e1 .\n    - _:e0 &lt;http://example.org/vocab#prev&gt; _:e1 .\n    - _:e1 &lt;http://example.org/vocab#next&gt; _:e0 .\n    - _:e1 &lt;http://example.org/vocab#prev&gt; _:e0 .\n  <span class=\"comment\">...</span></pre>\n          </details>"
        },
        {
          "html": "For each <var>quad</var> in <var>quads</var>:\n          <details>\n            <summary>Explanation</summary>\n            <p>This loop calculates the related hash <var>H<sub>n</sub></var>\n              for other blank nodes within the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-mention-set\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-mention-set-7\">mention set</a> of <var>identifier</var>.</p>\n          </details>",
          "rationale": "for",
          "steps": [
            {
              "html": "For each <var>component</var> in <var>quad</var>, where <var>component</var>\n              is the <a data-cite=\"RDF11-CONCEPTS#dfn-subject\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/rdf11-concepts/#dfn-subject\" id=\"ref-for-index-term-subject-6\">subject</a>, <a data-cite=\"RDF11-CONCEPTS#dfn-object\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/rdf11-concepts/#dfn-object\" id=\"ref-for-index-term-object-type-6\">object</a>, or\n              <a data-cite=\"RDF11-CONCEPTS#dfn-graph-name\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/rdf11-concepts/#dfn-graph-name\" id=\"ref-for-index-term-graph-name-7\">graph name</a>, and it is a\n              <a data-cite=\"RDF11-CONCEPTS#dfn-blank-node\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node\" id=\"ref-for-index-term-blank-nodes-29\">blank node</a> that is not identified by\n              <var>identifier</var>:",
              "rationale": "set",
              "steps": [
                {
                  "html": "Set <var>hash</var> to the result of the\n                  <a href=\"https://w3c.github.io/rdf-canon/spec/#hash-related-blank-node\">Hash Related Blank Node algorithm</a>,\n                  passing the <a data-cite=\"RDF11-CONCEPTS#dfn-blank-node-identifier\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier\" id=\"ref-for-index-term-blank-node-identifiers-38\">blank node identifier</a> for\n                  <var>component</var> as <var>related</var>, <var>quad</var>,\n                  <var>issuer</var>, and\n                  <var>position</var> as either <code>s</code>, <code>o</code>, or\n                  <code>g</code> based on whether <var>component</var> is a\n                  <a data-cite=\"RDF11-CONCEPTS#dfn-subject\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/rdf11-concepts/#dfn-subject\" id=\"ref-for-index-term-subject-7\">subject</a>, <a data-cite=\"RDF11-CONCEPTS#dfn-object\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/rdf11-concepts/#dfn-object\" id=\"ref-for-index-term-object-type-7\">object</a>,\n                  <a data-cite=\"RDF11-CONCEPTS#dfn-graph-name\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/rdf11-concepts/#dfn-graph-name\" id=\"ref-for-index-term-graph-name-8\">graph name</a>, respectively."
                },
                {
                  "html": "Add a mapping of <var>hash</var> to the\n                  <a data-cite=\"RDF11-CONCEPTS#dfn-blank-node-identifier\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier\" id=\"ref-for-index-term-blank-node-identifiers-39\">blank node identifier</a> for <var>component</var>\n                  to <var>H<sub>n</sub></var>, adding an entry\n                  as necessary."
                }
              ]
            }
          ]
        },
        {
          "html": "Create an empty string, <var>data to hash</var>."
        },
        {
          "html": "For each <var>related hash</var> to <var>blank node list</var> mapping in\n          <var>H<sub>n</sub></var>, <a data-cite=\"XPATH-FUNCTIONS#codepoint-collation\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/xpath-functions/#codepoint-collation\" id=\"ref-for-index-term-unicode-code-point-order-13\">code point ordered</a>\n          by <var>related hash</var>:\n          <details>\n            <summary>Explanation</summary>\n            <p>This loop explores the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-gossip-path\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-gossip-path-9\">gossip paths</a> for each\n              related blank node sharing a common hash to <var>identifier</var>\n              finding the shortest such path (<var>chosen path</var>).\n              This determines how canonical identifiers for\n              otherwise commonly hashed blank nodes are chosen.\n            </p>\n            <p>\n              Each path is represented by the concatenation of the\n              identifiers for each related blank node\n              — either the issued identifier,\n              or a temporary identifier created using a copy of <var>issuer</var>.\n              Those for which temporary identifiers were issued are later\n              recursed over using this algorithm.\n            </p>\n          </details>\n          <details>\n            <summary>Logging</summary>\n            <p>Log the value of <var>related hash</var>\n              and state of <var>data to hash</var>.</p>\n            <pre class=\"logging yaml nohighlight\"># Log related hash and data to hash in each iteration of step 5 for double circle example.\nhndq:\n  log point: Hash N-Degree Quads function (4.8.3).\n  identifier: e0\n  issuer: {e0: b0}\n  <span class=\"comment\">...</span>\n  hndq.5:\n    log point: Hash N-Degree Quads function (4.8.3 (5)), entering loop.\n    with:\n    - related_hash: 1e4e55ba02b8b0b527c32e2343fbcfee2e2bd9c1972c67cc01f85fabde7bc42d\n      data_to_hash: \"\"\n      <span class=\"comment\">...</span></pre>\n          </details>",
          "rationale": "append",
          "steps": [
            {
              "html": "Append the <var>related hash</var> to the <var>data to hash</var>."
            },
            {
              "html": "Create a <a data-cite=\"INFRA#string\" data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#string\" id=\"ref-for-index-term-string-6\">string</a> <var>chosen path</var>."
            },
            {
              "html": "Create an unset <var>chosen issuer</var> variable."
            },
            {
              "html": "For each <a href=\"https://en.wikipedia.org/wiki/Permutation\">permutation</a> <var>p</var> of <var>blank node list</var>:\n              <details>\n                <summary>Logging</summary>\n                <p>Log each <a href=\"https://en.wikipedia.org/wiki/Permutation\">permutation</a> <var>p</var>.</p>\n                <pre class=\"logging yaml nohighlight\"># Log each permutation of step 5.4 using double circle example.\nhndq:\n  log point: Hash N-Degree Quads function (4.8.3).\n  identifier: e0\n  issuer: {e0: b0}\n  <span class=\"comment\">...</span>\n  hndq.5:\n    log point: Hash N-Degree Quads function (4.8.3 (5)), entering loop.\n    with:\n    - related_hash: 1e4e55ba02b8b0b527c32e2343fbcfee2e2bd9c1972c67cc01f85fabde7bc42d\n      data_to_hash: \"\"\n      hndq.5.4:\n        log point: Hash N-Degree Quads function (4.8.3 (5.4)), entering loop.\n        with:\n        - perm: [ \"e1\"]\n          <span class=\"comment\">...</span></pre>\n              </details>",
              "rationale": "create",
              "steps": [
                {
                  "html": "Create a copy of <var>issuer</var>, <var>issuer copy</var>."
                },
                {
                  "html": "Create a <a data-cite=\"INFRA#string\" data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#string\" id=\"ref-for-index-term-string-7\">string</a> <var>path</var>."
                },
                {
                  "html": "Create a <var>recursion list</var>, to store\n                  <a data-cite=\"RDF11-CONCEPTS#dfn-blank-node-identifier\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier\" id=\"ref-for-index-term-blank-node-identifiers-40\">blank node identifiers</a> that must be\n                  recursively processed by this algorithm."
                },
                {
                  "html": "For each <var>related</var> in <var>p</var>:",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "If a canonical identifier has been issued for\n                      <var>related</var> by <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-canonical-issuer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canonical-issuer-19\">canonical issuer</a>, append the string <code>_:</code>, followed by\n                      the canonical identifier for <var>related</var>, to <var>path</var>.\n                      <details><summary>Explanation</summary>\n                        <p>A canonical identifier may have been generated before calling this algorithm,\n                            if it was issued from an earlier call to <a href=\"https://w3c.github.io/rdf-canon/spec/#hash-1d-quads\">Hash First Degree Quads algorithm</a>.\n                            There is no reason to recurse and apply the algorithm to any related blank node that has already been assigned a canonical identifier.\n                             Furthermore, using the canonical identifier also further distinguishes it from any temporary identifier, allowing for even greater efficiency in finding the chosen path.</p>\n                      </details>"
                    },
                    {
                      "html": "Otherwise:",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "If <i>issuer copy</i> has not issued\n                          an identifier for <var>related</var>, append\n                          <var>related</var> to <var>recursion list</var>.\n                          <details>\n                            <summary>Explanation</summary>\n                            <p>Temporarily labeled nodes have identifiers recorded\n                              in <var>issuer copy</var>,\n                              which is later used to recursively call this algorithm,\n                              so that eventually all nodes are given canonical identifiers.</p>\n                          </details>"
                        },
                        {
                          "html": "Use the\n                          <a href=\"https://w3c.github.io/rdf-canon/spec/#issue-identifier\">Issue Identifier algorithm</a>,\n                          passing <var>issuer copy</var> and the <var>related</var>, and\n                          append the string <code>_:</code>, followed by the result, to <var>path</var>."
                        }
                      ]
                    },
                    {
                      "html": "If <var>chosen path</var> is not empty and the length\n                      of <var>path</var> is greater than or equal to the length\n                      of <var>chosen path</var> and <var>path</var> is\n                      greater than <var>chosen path</var> when\n                      considering <a data-cite=\"XPATH-FUNCTIONS#codepoint-collation\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/xpath-functions/#codepoint-collation\" id=\"ref-for-index-term-unicode-code-point-order-14\">code point order</a>,\n                      then skip to the next\n                      <a href=\"https://en.wikipedia.org/wiki/Permutation\">permutation</a> <var>p</var>.\n                      <details>\n                        <summary>Explanation</summary>\n                        <p>If <var>path</var> is already longer than\n                          the prospective <var>chosen path</var>,\n                          we can terminate this iteration early.</p>\n                      </details>"
                    }
                  ]
                },
                {
                  "html": "For each <var>related</var> in <var>recursion list</var>:\n                  <details>\n                    <summary>Explanation</summary>\n                    <p>The prospective <var>path</var> is extended with\n                      the hash resulting from recursively calling this algorithm\n                      on each related blank node issued a temporary identifier.</p>\n                  </details>\n                  <details>\n                    <summary>Logging</summary>\n                    <p>Log <var>recursion list</var> and <var>path</var>.</p>\n                    <pre class=\"logging yaml nohighlight\"># Log related and path of step 5.4.5 using double circle example.\nhndq:\n  log point: Hash N-Degree Quads function (4.8.3).\n  identifier: e0\n  issuer: {e0: b0}\n  <span class=\"comment\">...</span>\n  hndq.5:\n    log point: Hash N-Degree Quads function (4.8.3 (5)), entering loop.\n    with:\n    - related_hash: 1e4e55ba02b8b0b527c32e2343fbcfee2e2bd9c1972c67cc01f85fabde7bc42d\n      data_to_hash: \"\"\n      hndq.5.4:\n        log point: Hash N-Degree Quads function (4.8.3 (5.4)), entering loop.\n        with:\n        - perm: [ \"e1\"]\n          <span class=\"comment\">...</span>\n          hndq.5.4.5:\n            log point: Hash N-Degree Quads function (4.8.3 (5.4.5)), before possible recursion.\n            recursion list: [ \"e1\"]\n            path: \"_:b1\"\n          <span class=\"comment\">...</span></pre>\n                  </details>",
                  "rationale": "set",
                  "steps": [
                    {
                      "html": "Set <var>result</var> to the result of recursively executing\n                      the <a href=\"https://w3c.github.io/rdf-canon/spec/#hash-nd-quads\">Hash N-Degree Quads algorithm</a>,\n                      passing the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-canonicalization-state\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canonicalization-state-9\">canonicalization state</a>,\n                      <var>related</var> for <var>identifier</var>, and\n                      <var>issuer copy</var> for <var>path identifier issuer</var>.\n                      <details>\n                        <summary>Logging</summary>\n                        <p>Log <var>related</var> and\n                          include logs for each recursive call to <a href=\"https://w3c.github.io/rdf-canon/spec/#hash-nd-quads\">Hash N-Degree Quads algorithm</a>.</p>\n                        <pre class=\"logging yaml nohighlight\"># Log related and path of step 5.4.5.1 using double circle example.\nhndq:\n  log point: Hash N-Degree Quads function (4.8.3).\n  identifier: e0\n  issuer: {e0: b0}\n  <span class=\"comment\">...</span>\n  hndq.5:\n    log point: Hash N-Degree Quads function (4.8.3 (5)), entering loop.\n    with:\n    - related_hash: 1e4e55ba02b8b0b527c32e2343fbcfee2e2bd9c1972c67cc01f85fabde7bc42d\n      data_to_hash: \"\"\n      hndq.5.4:\n        log point: Hash N-Degree Quads function (4.8.3 (5.4)), entering loop.\n        with:\n        - perm: [ \"e1\"]\n          <span class=\"comment\">...</span>\n          hndq.5.4.5:\n            log point: Hash N-Degree Quads function (4.8.3 (5.4.5)), before possible recursion.\n            recursion list: [ \"e1\"]\n            path: \"_:b1\"\n            with:\n              - related: e1\n                hndq:\n                  <span class=\"comment\">...</span></pre>\n                      </details>"
                    },
                    {
                      "html": "Use the\n                      <a href=\"https://w3c.github.io/rdf-canon/spec/#issue-identifier\">Issue Identifier algorithm</a>,\n                      passing <var>issuer copy</var> and <var>related</var>; append the string <code>_:</code>, followed by\n                      the result, to <var>path</var>."
                    },
                    {
                      "html": "Append <code>&lt;</code>, the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-hash\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-hash-18\">hash</a> in\n                      <var>result</var>, and <code>&gt;</code> to <var>path</var>."
                    },
                    {
                      "html": "Set <var>issuer copy</var> to the\n                      <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-identifier-issuer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-identifier-issuer-11\">identifier issuer</a> in result."
                    },
                    {
                      "html": "If <var>chosen path</var> is not empty and the length\n                      of <var>path</var> is greater than or equal to the length\n                      of <var>chosen path</var> and <var>path</var> is\n                      greater than <var>chosen path</var> when considering <a data-cite=\"XPATH-FUNCTIONS#codepoint-collation\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/xpath-functions/#codepoint-collation\" id=\"ref-for-index-term-unicode-code-point-order-15\">code point order</a>,\n                      then skip to the next <var>p</var>.\n                      <details>\n                        <summary>Explanation</summary>\n                        <p>If <var>path</var> is already longer than\n                          the prospective <var>chosen path</var>,\n                          we can terminate this iteration early.</p>\n                      </details>"
                    }
                  ]
                },
                {
                  "html": "If <var>chosen path</var> is empty or <var>path</var> is\n                  less than <var>chosen path</var> when considering <a data-cite=\"XPATH-FUNCTIONS#codepoint-collation\" data-link-type=\"dfn\" href=\"https://www.w3.org/TR/xpath-functions/#codepoint-collation\" id=\"ref-for-index-term-unicode-code-point-order-16\">code point order</a>,\n                  set <var>chosen path</var> to <var>path</var> and <var>chosen issuer</var>\n                  to <var>issuer copy</var>."
                }
              ]
            },
            {
              "html": "Append <var>chosen path</var> to <var>data to hash</var>.\n              <details>\n                <summary>Logging</summary>\n                <p>Log <var>chosen path</var> and <var>data to hash</var>.</p>\n                <pre class=\"logging yaml nohighlight\"># Log chosen path and data to hash logs of step 5.5 using double circle example.\nhndq:\n  log point: Hash N-Degree Quads function (4.8.3).\n  identifier: e0\n  issuer: {e0: b0}\n  <span class=\"comment\">...</span>\n  hndq.5:\n    log point: Hash N-Degree Quads function (4.8.3 (5)), entering loop.\n    with:\n    - related_hash: 1e4e55ba02b8b0b527c32e2343fbcfee2e2bd9c1972c67cc01f85fabde7bc42d\n      data_to_hash: \"\"\n      <span class=\"comment\">...</span>\n      hndq.5.5:\n        log point: Hash N-Degree Quads function (4.8.3 (5.5). End of current loop with Hn hashes.\n        chosen path: \"_:b1_:b1&lt;1ae899f76e760eb7caf6656437aaef845b50887aff7baeb3531add85ec02ed35&gt;\"\n        data to hash: \"1e4e55ba02b8b0b527c32e2343fbcfee2e2bd9c1972c67cc01f85fabde7bc42d_:b1_:b1&lt;1ae899f76e760eb7caf6656437aaef845b50887aff7baeb3531add85ec02ed35&gt;\"\n      <span class=\"comment\">...</span></pre>\n              </details>"
            },
            {
              "html": "Replace <var>issuer</var>, by reference, with<var>chosen issuer</var>."
            }
          ]
        },
        {
          "html": "Return <var>issuer</var> and the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-hash\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-hash-19\">hash</a> that results from\n          passing <var>data to hash</var> through the\n          <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-hash-algorithm\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-hash-algorithm-6\">hash algorithm</a>.\n          <details>\n            <summary>Logging</summary>\n            <p>Log <var>issuer</var> and results from passing <var>data to hash</var>\n              through the <a href=\"https://w3c.github.io/rdf-canon/spec/#dfn-hash-algorithm\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-hash-algorithm-7\">hash algorithm</a>.</p>\n            <pre class=\"logging yaml nohighlight\"># Log issuer and resulting hash of step 6 using double circle example.\nhndq:\n  log point: Hash N-Degree Quads function (4.8.3).\n  identifier: e0\n  issuer: {e0: b0}\n  <span class=\"comment\">...</span>\n  hndq.6:\n    log point: Leaving Hash N-Degree Quads function (4.8.3).\n    hash: e332b4b59e1c4794ee72a4df0f63723326ffb6d6a5c0d0cb4d2dd8d8d5ebf5a4\n    issuer: {e0: b0, e1: b1}</pre>\n          </details>"
        }
      ]
    }
  ]
}