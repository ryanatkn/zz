{
  "spec": {
    "title": "CSS Box Sizing Module Level 3",
    "url": "https://www.w3.org/TR/css-sizing-3/"
  },
  "algorithms": [
    {
      "name": "cyclic percentage size",
      "href": "https://www.w3.org/TR/css-sizing-3/#cyclic-percentage-size",
      "html": "Sometimes the size of a percentage-sized box’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-display-3/#containing-block\" id=\"ref-for-containing-block①③\">containing block</a> depends on the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-sizing-3/#intrinsic-size-contribution\" id=\"ref-for-intrinsic-size-contribution\">intrinsic size contribution</a> of the box itself,\n\tcreating a cyclic dependency.\n\tWhen calculating the <span id=\"ref-for-intrinsic-size-contribution①\">intrinsic size contribution</span> of such a box\n\t(including any calculations for a content-based <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-sizing-3/#automatic-minimum-size\" id=\"ref-for-automatic-minimum-size\">automatic minimum size</a>),\n\ta percentage value that resolves against a size\n\tin the same axis as the <span id=\"ref-for-intrinsic-size-contribution②\">intrinsic size contribution</span> (a <dfn class=\"dfn-paneled\" data-dfn-type=\"dfn\" data-export=\"\" data-local-lt=\"cyclic percentage\" id=\"cyclic-percentage-size\">cyclic percentage size</dfn>)\n\tis resolved specially:",
      "rationale": "if",
      "steps": [
        {
          "html": "<a class=\"self-link\" href=\"https://www.w3.org/TR/css-sizing-3/#non-replaced-percentage-contribution\"></a> If the box is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-display-3/#non-replaced\" id=\"ref-for-non-replaced①\">non-replaced</a>,\n\t\tthen the entire value of any <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-sizing-3/#max-size-properties\" id=\"ref-for-max-size-properties④\">max size property</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-sizing-3/#preferred-size-properties\" id=\"ref-for-preferred-size-properties④\">preferred size property</a> (<a class=\"property\" data-link-type=\"propdesc\" href=\"https://www.w3.org/TR/css-sizing-3/#propdef-width\" id=\"ref-for-propdef-width①⑧\">width</a>/<a class=\"property\" data-link-type=\"propdesc\" href=\"https://www.w3.org/TR/css-sizing-3/#propdef-max-width\" id=\"ref-for-propdef-max-width④\">max-width</a>/<a class=\"property\" data-link-type=\"propdesc\" href=\"https://www.w3.org/TR/css-sizing-3/#propdef-height\" id=\"ref-for-propdef-height①⑥\">height</a>/<a class=\"property\" data-link-type=\"propdesc\" href=\"https://www.w3.org/TR/css-sizing-3/#propdef-max-height\" id=\"ref-for-propdef-max-height④\">max-height</a>)\n\t\tspecified as an expression containing a percentage\n\t\t(such as <span class=\"css\">10%</span> or <span class=\"css\">calc(10px + 0%)</span>)\n\t\tthat is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-sizing-3/#cyclic-percentage-size\" id=\"ref-for-cyclic-percentage-size\">cyclic</a> is treated <em>for the purpose of calculating the box’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-sizing-3/#intrinsic-size-contribution\" id=\"ref-for-intrinsic-size-contribution③\">intrinsic size contributions</a> only</em> as that property’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-cascade-5/#initial-value\" id=\"ref-for-initial-value\">initial value</a>.\n\t\tFor example, given a box with <span class=\"css\" id=\"ref-for-propdef-width①⑨\">width: calc(20px + 50%)</span>,\n\t\tits max-content contribution is calculated as if its <span class=\"property\" id=\"ref-for-propdef-width②⓪\">width</span> were <a class=\"css\" data-link-type=\"maybe\" href=\"https://www.w3.org/TR/css-sizing-3/#valdef-width-auto\" id=\"ref-for-valdef-width-auto①⑤\">auto</a>.\n\t\t(The percentage is honored as usual, however,\n\t\tduring the actual sizing of the box itself; see below.)"
        },
        {
          "html": "<a class=\"self-link\" href=\"https://www.w3.org/TR/css-sizing-3/#replaced-percentage-max-contribution\"></a> Likewise, if the box is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-display-3/#replaced-element\" id=\"ref-for-replaced-element②\">replaced</a>,\n\t\tthen the entire value of any <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-sizing-3/#max-size-properties\" id=\"ref-for-max-size-properties①\">max size property</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-sizing-3/#preferred-size-properties\" id=\"ref-for-preferred-size-properties①\">preferred size property</a> specified as an expression containing a percentage\n\t\tthat is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-sizing-3/#cyclic-percentage-size\" id=\"ref-for-cyclic-percentage-size①\">cyclic</a> is treated <em>for the purpose of calculating the box’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-sizing-3/#max-content-contribution\" id=\"ref-for-max-content-contribution③\">max-content contributions</a> only</em> as that property’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-cascade-5/#initial-value\" id=\"ref-for-initial-value①\">initial value</a>."
        },
        {
          "html": "<a class=\"self-link\" href=\"https://www.w3.org/TR/css-sizing-3/#replaced-percentage-min-contribution\"></a> If the box is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-display-3/#replaced-element\" id=\"ref-for-replaced-element③\">replaced</a>,\n\t\ta <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-sizing-3/#cyclic-percentage-size\" id=\"ref-for-cyclic-percentage-size②\">cyclic percentage</a> in the value of any <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-sizing-3/#max-size-properties\" id=\"ref-for-max-size-properties②\">max size property</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-sizing-3/#preferred-size-properties\" id=\"ref-for-preferred-size-properties②\">preferred size property</a> (<a class=\"property\" data-link-type=\"propdesc\" href=\"https://www.w3.org/TR/css-sizing-3/#propdef-width\" id=\"ref-for-propdef-width②①\">width</a>/<a class=\"property\" data-link-type=\"propdesc\" href=\"https://www.w3.org/TR/css-sizing-3/#propdef-max-width\" id=\"ref-for-propdef-max-width⑤\">max-width</a>/<a class=\"property\" data-link-type=\"propdesc\" href=\"https://www.w3.org/TR/css-sizing-3/#propdef-height\" id=\"ref-for-propdef-height①⑦\">height</a>/<a class=\"property\" data-link-type=\"propdesc\" href=\"https://www.w3.org/TR/css-sizing-3/#propdef-max-height\" id=\"ref-for-propdef-max-height⑤\">max-height</a>),\n\t\tis resolved against zero\n\t\twhen calculating the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-sizing-3/#min-content-contribution\" id=\"ref-for-min-content-contribution③\">min-content contribution</a> in the corresponding axis.\n\t\t(See <a href=\"https://www.w3.org/TR/css-sizing-3/#min-content-zero\">§ 5.2.2 Compressible Replaced Elements</a> for a list of which elements in HTML this applies to.)\n\t\tIf the box also has a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-sizing-3/#preferred-aspect-ratio\" id=\"ref-for-preferred-aspect-ratio⑥\">preferred aspect ratio</a>,\n\t\tthen this <span id=\"ref-for-min-content-contribution④\">min-content contribution</span> is floored\n\t\tby any <a class=\"production css\" data-link-type=\"type\" href=\"https://www.w3.org/TR/css-values-4/#typedef-length-percentage\" id=\"ref-for-typedef-length-percentage②④\">&lt;length-percentage&gt;</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-sizing-3/#min-width\" id=\"ref-for-min-width④\">minimum size</a> from the opposite axis—<wbr>resolving any such percentage against zero—<wbr>transferred through the <span id=\"ref-for-preferred-aspect-ratio⑦\">preferred aspect ratio</span>. \n     \n     <p>The UA may additionally floor the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-sizing-3/#min-content-contribution\" id=\"ref-for-min-content-contribution⑤\">min-content contribution</a> based on UI considerations,\n\t\tsuch as ensuring certain UI elements remain visible\n\t\t(for example, the dropdown arrow on a <code><a data-link-type=\"element\" href=\"https://html.spec.whatwg.org/multipage/form-elements.html#the-select-element\" id=\"ref-for-the-select-element\">select</a></code>).</p>\n     \n     <p>This rule also applies when calculating\n\t\ta content-based <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-sizing-3/#automatic-minimum-size\" id=\"ref-for-automatic-minimum-size①\">automatic minimum size</a> or its corresponding size contribution,\n\t\tyielding a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-sizing-3/#definite\" id=\"ref-for-definite①⓪\">definite</a> “specified size suggestion”.</p>"
        },
        {
          "html": "<a class=\"self-link\" href=\"https://www.w3.org/TR/css-sizing-3/#min-percentage-contribution\"></a> For the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-sizing-3/#min-size-properties\" id=\"ref-for-min-size-properties①\">min size properties</a>,\n\t\tas well as for <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-box-4/#margin\" id=\"ref-for-margin\">margins</a> and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-box-4/#padding\" id=\"ref-for-padding\">paddings</a> (and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-align-3/#gutter\" id=\"ref-for-gutter\">gutters</a>),\n\t\ta <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-sizing-3/#cyclic-percentage-size\" id=\"ref-for-cyclic-percentage-size③\">cyclic percentage</a> is resolved against zero\n\t\tfor determining <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-sizing-3/#intrinsic-size-contribution\" id=\"ref-for-intrinsic-size-contribution④\">intrinsic size contributions</a>."
        }
      ]
    }
  ]
}