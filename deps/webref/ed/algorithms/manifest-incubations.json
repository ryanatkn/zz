{
  "spec": {
    "title": "Manifest Incubations",
    "url": "https://wicg.github.io/manifest-incubations/"
  },
  "algorithms": [
    {
      "html": "The following steps are added to the <a data-link-type=\"dfn\" data-link-for=\"application manifest\" data-xref-for=\"application manifest\" data-cite=\"appmanifest\" data-cite-path=\"\" data-cite-frag=\"dfn-processing-extension-point\" href=\"https://www.w3.org/TR/appmanifest/#dfn-processing-extension-point\">processing extension-point</a> in <a data-cite=\"appmanifest#dfn-steps-for-determining-the-web-app-s-chosen-display-mode\" href=\"https://www.w3.org/TR/appmanifest/#dfn-steps-for-determining-the-web-app-s-chosen-display-mode\">\n        determining the web app's chosen display mode</a>:",
      "rationale": "for",
      "steps": [
        {
          "html": "<a data-link-type=\"dfn\" data-link-for=\"list\" data-xref-for=\"list\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list-iterate\" href=\"https://infra.spec.whatwg.org/#list-iterate\">For each</a> <var data-type=\"DisplayModeType\">candidate_display_mode</var> of\n        <var data-type=\"ordered map\">manifest</var>.<a data-link-type=\"dfn|abstract-op\" data-link-for=\"manifest\" data-xref-for=\"manifest\" href=\"https://wicg.github.io/manifest-incubations/#dfn-display_override\" class=\"internalDFN\" id=\"ref-for-dfn-display_override-3\"><code>display_override</code></a> member:",
          "rationale": ".algorithm",
          "steps": [
            {
              "html": "If <a data-cite=\"appmanifest/#dfn-display-modes-list\" href=\"https://www.w3.org/TR/appmanifest/#dfn-display-modes-list\">display\n            modes list</a> contains <var data-type=\"DisplayModeType\">candidate_display_mode</var>,\n            return that <var data-type=\"DisplayModeType\">candidate_display_mode</var>"
            },
            {
              "html": "If <var data-type=\"DisplayModeType\">candidate_display_mode</var> is <a data-link-type=\"dfn\" data-link-for=\"display mode\" data-xref-for=\"display mode\" data-cite=\"window-controls-overlay\" data-cite-path=\"\" data-cite-frag=\"dfn-window-controls-overlay-0\" href=\"https://wicg.github.io/window-controls-overlay/#dfn-window-controls-overlay-0\">window-controls-overlay</a> and the user agent supports this,\n            then return that <var data-type=\"DisplayModeType\">candidate_display_mode</var>."
            },
            {
              "html": "If <var data-type=\"DisplayModeType\">candidate_display_mode</var> is <a data-link-type=\"dfn|abstract-op\" data-link-for=\"display mode\" data-xref-for=\"display mode\" href=\"https://wicg.github.io/manifest-incubations/#dfn-tabbed\" class=\"internalDFN\" id=\"ref-for-dfn-tabbed-1\">tabbed</a> and the user agent supports this, then return that\n            <var data-type=\"DisplayModeType\">candidate_display_mode</var>."
            }
          ]
        }
      ]
    },
    {
      "html": "To facilitate all of the new extension and incubation features added by\n        this specification, the user agent <em class=\"rfc2119\">SHOULD</em> run the following during the\n        <a data-cite=\"appmanifest#dfn-processing-extension-point-of-web-manifest\" href=\"https://www.w3.org/TR/appmanifest/#dfn-processing-extension-point-of-web-manifest\">extension\n        point</a> in <a data-link-type=\"dfn\" data-cite=\"appmanifest\" data-cite-path=\"\" data-cite-frag=\"dfn-processing-a-manifest\" href=\"https://www.w3.org/TR/appmanifest/#dfn-processing-a-manifest\">processing a manifest</a> (having access to <a data-link-type=\"dfn\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url\" href=\"https://url.spec.whatwg.org/#concept-url\">URL</a>\n        <var data-type=\"URL\">document URL</var>, <a data-link-type=\"dfn\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url\" href=\"https://url.spec.whatwg.org/#concept-url\">URL</a> <var data-type=\"URL\">manifest URL</var>, <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a>\n        <var data-type=\"ordered map\">json</var>, and <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a> <var data-type=\"ordered map\">manifest</var>):",
      "rationale": "process",
      "steps": [
        {
          "html": "<a data-link-type=\"dfn|abstract-op\" href=\"https://wicg.github.io/manifest-incubations/#dfn-process-the-tab_strip-member\" class=\"internalDFN\" id=\"ref-for-dfn-process-the-tab_strip-member-1\">Process the <code>tab_strip</code> member</a>, passing <var data-type=\"ordered map\">json</var>, <var data-type=\"ordered map\">manifest</var> and\n        <var data-type=\"URL\">manifest URL</var>."
        },
        {
          "html": "<a data-link-type=\"dfn|abstract-op\" href=\"https://wicg.github.io/manifest-incubations/#dfn-process-the-note_taking-member\" class=\"internalDFN\" id=\"ref-for-dfn-process-the-note_taking-member-1\">Process the <code>note_taking</code> member</a>, passing <var data-type=\"ordered map\">json</var>, <var data-type=\"ordered map\">manifest</var>\n        and <var data-type=\"URL\">manifest URL</var>."
        },
        {
          "html": "<a data-link-type=\"dfn|abstract-op\" href=\"https://wicg.github.io/manifest-incubations/#dfn-process-the-protocol_handlers-member\" class=\"internalDFN\" id=\"ref-for-dfn-process-the-protocol_handlers-member-1\">Process the <code>protocol_handlers</code> member</a>, passing <var data-type=\"ordered map\">json</var> and\n        <var data-type=\"ordered map\">manifest</var>."
        },
        {
          "html": "<a data-link-type=\"dfn|abstract-op\" href=\"https://wicg.github.io/manifest-incubations/#dfn-process-the-file_handlers-member\" class=\"internalDFN\" id=\"ref-for-dfn-process-the-file_handlers-member-1\">Process the <code>file_handlers</code> member</a>, passing <var data-type=\"ordered map\">json</var>, <var data-type=\"ordered map\">manifest</var>\n        and <var data-type=\"URL\">manifest URL</var>."
        },
        {
          "html": "<a data-link-type=\"dfn|abstract-op\" href=\"https://wicg.github.io/manifest-incubations/#dfn-process-the-related_applications-member\" class=\"internalDFN\" id=\"ref-for-dfn-process-the-related_applications-member-1\">Process the <code>related_applications</code> member</a>, passing <var data-type=\"ordered map\">json</var> and\n        <var data-type=\"ordered map\">manifest</var>."
        },
        {
          "html": "<a data-link-type=\"dfn|abstract-op\" href=\"https://wicg.github.io/manifest-incubations/#dfn-process-the-scope_extensions-member\" class=\"internalDFN\" id=\"ref-for-dfn-process-the-scope_extensions-member-1\">Process the <code>scope_extensions</code> member</a>, passing <var data-type=\"ordered map\">json</var> and\n        <var data-type=\"ordered map\">manifest</var>."
        }
      ]
    },
    {
      "html": "When <a data-link-type=\"dfn\" data-lt=\"navigate\" data-cite=\"html\" data-cite-path=\"/browsing-the-web.html\" data-cite-frag=\"navigate\" href=\"https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate\">navigating</a> the <a data-link-type=\"dfn\" data-cite=\"html\" data-cite-path=\"/document-sequences.html\" data-cite-frag=\"top-level-traversable\" href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-traversable\">top-level traversable</a>\n            associated with a <a data-link-type=\"dfn|abstract-op\" href=\"https://wicg.github.io/manifest-incubations/#dfn-home-tab-context\" class=\"internalDFN\" id=\"ref-for-dfn-home-tab-context-8\">home tab context</a> to a <a data-link-type=\"dfn\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url\" href=\"https://url.spec.whatwg.org/#concept-url\">URL</a> <var data-type=\"URL\">url</var> that\n            is <a data-link-type=\"dfn|abstract-op\" href=\"https://wicg.github.io/manifest-incubations/#dfn-outside-of-home-tab-scope\" class=\"internalDFN\" id=\"ref-for-dfn-outside-of-home-tab-scope-3\">outside of home tab scope</a>, the following steps are run:",
      "rationale": "let",
      "steps": [
        {
          "html": "Let <a data-link-type=\"dfn\" data-cite=\"html\" data-cite-path=\"/document-sequences.html\" data-cite-frag=\"top-level-traversable\" href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-traversable\">top-level traversable</a> <var data-type=\"toplevel traversable\">tab</var> be the\n            result of choosing a navigable with a target of\n            <code>\"_blank\"</code> and noopener true."
        },
        {
          "html": "Instead of <a data-link-type=\"dfn\" data-cite=\"html\" data-cite-path=\"/nav-history-apis.html\" data-cite-frag=\"blocking-navigating\" href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#blocking-navigating\">navigating</a> the home-tab traversable,\n            <a data-link-type=\"dfn\" data-cite=\"html\" data-cite-path=\"/browsing-the-web.html\" data-cite-frag=\"navigate\" href=\"https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate\">navigate</a> <var data-type=\"toplevel traversable\">tab</var> with the same parameters."
        },
        {
          "html": "<a data-link-type=\"dfn|abstract-op\" data-lt=\"applied\" class=\"respec-offending-element\" title=\"No matching definition found.\" id=\"respec-offender-no-matching-definition-found\">Apply</a> the current <a data-link-type=\"dfn\" data-cite=\"appmanifest\" data-cite-path=\"\" data-cite-frag=\"dfn-manifest\" href=\"https://www.w3.org/TR/appmanifest/#dfn-manifest\">application manifest</a> to\n            <var data-type=\"toplevel traversable\">tab</var>'s <a data-link-type=\"dfn\" data-cite=\"html\" data-cite-path=\"/document-sequences.html\" data-cite-frag=\"top-level-browsing-context\" href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context\">top-level browsing context</a>."
        },
        {
          "html": "The user agent <em class=\"rfc2119\">SHOULD</em> place <var data-type=\"toplevel traversable\">tab</var> in the same window as the\n            home-tab navigable."
        },
        {
          "html": "Focus <var data-type=\"toplevel traversable\">tab</var>."
        }
      ]
    },
    {
      "html": "When <a data-link-type=\"dfn\" data-lt=\"navigate\" data-cite=\"html\" data-cite-path=\"/browsing-the-web.html\" data-cite-frag=\"navigate\" href=\"https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate\">navigating</a> a <a data-link-type=\"dfn\" data-cite=\"html\" data-cite-path=\"/document-sequences.html\" data-cite-frag=\"top-level-traversable\" href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-traversable\">top-level traversable</a> with a\n            <a data-link-type=\"dfn|abstract-op\" class=\"respec-offending-element\" title=\"Definition is ambiguous.\" id=\"respec-offender-definition-is-ambiguous-2\">display mode</a> of <a data-link-type=\"dfn|abstract-op\" data-link-for=\"display mode\" data-xref-for=\"display mode\" href=\"https://wicg.github.io/manifest-incubations/#dfn-tabbed\" class=\"internalDFN\" id=\"ref-for-dfn-tabbed-4\">tabbed</a> that is not associated\n            with a <a data-link-type=\"dfn|abstract-op\" href=\"https://wicg.github.io/manifest-incubations/#dfn-home-tab-context\" class=\"internalDFN\" id=\"ref-for-dfn-home-tab-context-9\">home tab context</a> (i.e. a non-home tab) to a <a data-link-type=\"dfn\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url\" href=\"https://url.spec.whatwg.org/#concept-url\">URL</a>\n            <var data-type=\"URL\">url</var> that is <a data-link-type=\"dfn|abstract-op\" href=\"https://wicg.github.io/manifest-incubations/#dfn-within-home-tab-scope\" class=\"internalDFN\" id=\"ref-for-dfn-within-home-tab-scope-6\">within home tab scope</a>, the following steps\n            are run:",
      "rationale": "let",
      "steps": [
        {
          "html": "Let <var data-type=\"toplevel traversable\">hometab</var> be the <a data-link-type=\"dfn\" data-cite=\"html\" data-cite-path=\"/document-sequences.html\" data-cite-frag=\"top-level-traversable\" href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-traversable\">top-level traversable</a> of the <a data-link-type=\"dfn|abstract-op\" href=\"https://wicg.github.io/manifest-incubations/#dfn-home-tab-context\" class=\"internalDFN\" id=\"ref-for-dfn-home-tab-context-10\">home tab context</a> associated with the\n            current window."
        },
        {
          "html": "Instead of <a data-link-type=\"dfn\" data-cite=\"html\" data-cite-path=\"/nav-history-apis.html\" data-cite-frag=\"blocking-navigating\" href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#blocking-navigating\">navigating</a> the top-level traversable,\n            <a data-link-type=\"dfn\" data-cite=\"html\" data-cite-path=\"/browsing-the-web.html\" data-cite-frag=\"navigate\" href=\"https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate\">navigate</a> <var data-type=\"toplevel traversable\">hometab</var> with the same parameters."
        },
        {
          "html": "Focus <var data-type=\"toplevel traversable\">hometab</var>."
        }
      ]
    },
    {
      "html": "When the new tab button is activated by the end user, the following\n          steps are run:",
      "rationale": "create",
      "steps": [
        {
          "html": "<a data-link-type=\"dfn\" data-cite=\"appmanifest\" data-cite-path=\"\" data-cite-frag=\"dfn-create-a-new-application-context\" href=\"https://www.w3.org/TR/appmanifest/#dfn-create-a-new-application-context\">Create a new application context</a> in the current window and\n          focus it."
        },
        {
          "html": "Navigate it to the value of the <a data-link-type=\"dfn|abstract-op\" data-link-for=\"new_tab_button\" data-xref-for=\"new_tab_button\" href=\"https://wicg.github.io/manifest-incubations/#dfn-url\" class=\"internalDFN\" id=\"ref-for-dfn-url-4\"><code>url</code></a> member of\n          <a data-link-type=\"dfn|abstract-op\" href=\"https://wicg.github.io/manifest-incubations/#dfn-new_tab_button\" class=\"internalDFN\" id=\"ref-for-dfn-new_tab_button-4\"><code>new_tab_button</code></a>."
        }
      ]
    },
    {
      "name": "process the tab_strip member",
      "href": "https://wicg.github.io/manifest-incubations/#dfn-process-the-tab_strip-member",
      "html": "To <dfn id=\"dfn-process-the-tab_strip-member\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">process the <code>tab_strip</code> member</dfn>, given <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a>\n          <var data-type=\"ordered map\">json</var>, <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a> <var data-type=\"ordered map\">manifest</var>, and\n          <a data-link-type=\"dfn\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url\" href=\"https://url.spec.whatwg.org/#concept-url\">URL</a> <var data-type=\"URL\">manifest URL</var>, run the following during the\n          <a data-cite=\"appmanifest#dfn-processing-extension-point-of-web-manifest\" href=\"https://www.w3.org/TR/appmanifest/#dfn-processing-extension-point-of-web-manifest\">\n          extension point</a> in <a data-link-type=\"dfn\" data-cite=\"appmanifest\" data-cite-path=\"\" data-cite-frag=\"dfn-processing-a-manifest\" href=\"https://www.w3.org/TR/appmanifest/#dfn-processing-a-manifest\">processing a manifest</a>:",
      "rationale": "set",
      "steps": [
        {
          "html": "Set <var data-type=\"ordered map\">manifest</var>[\"tab_strip\"] to a new <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a>."
        },
        {
          "html": "If <var data-type=\"ordered map\">json</var>[\"tab_strip\"] does not exist or <var data-type=\"ordered map\">json</var>[\"tab_strip\"] is\n          not an <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a>:",
          "rationale": "set",
          "steps": [
            {
              "html": "Set <var data-type=\"ordered map\">manifest</var>[\"tab_strip\"][\"new_tab_button\"][\"url\"] to\n              <var data-type=\"ordered map\">manifest</var>[\"start_url\"]."
            },
            {
              "html": "Return."
            }
          ]
        },
        {
          "html": "<a data-link-type=\"dfn|abstract-op\" href=\"https://wicg.github.io/manifest-incubations/#dfn-process-the-home_tab-member\" class=\"internalDFN\" id=\"ref-for-dfn-process-the-home_tab-member-1\">Process the <code>home_tab</code> member</a> passing <var data-type=\"ordered map\">json</var>[\"tab_strip\"],\n          <var data-type=\"ordered map\">manifest</var>[\"tab_strip\"], and <var data-type=\"URL\">manifest URL</var>."
        },
        {
          "html": "<a data-link-type=\"dfn|abstract-op\" href=\"https://wicg.github.io/manifest-incubations/#dfn-process-the-new_tab_button-member\" class=\"internalDFN\" id=\"ref-for-dfn-process-the-new_tab_button-member-1\">Process the <code>new_tab_button</code> member</a> passing\n          <var data-type=\"ordered map\">json</var>[\"tab_strip\"], <var data-type=\"ordered map\">manifest</var>[\"tab_strip\"], <var data-type=\"URL\">manifest URL</var>, and\n          <var data-type=\"ordered map\">manifest</var>[\"start_url\"]."
        }
      ]
    },
    {
      "name": "process the home_tab member",
      "href": "https://wicg.github.io/manifest-incubations/#dfn-process-the-home_tab-member",
      "html": "To <dfn id=\"dfn-process-the-home_tab-member\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">process the <code>home_tab</code> member</dfn>, given <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a>\n            <var data-type=\"ordered map\">json tab strip</var>, <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a> <var data-type=\"ordered map\">manifest tab\n            strip</var>, and <a data-link-type=\"dfn\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url\" href=\"https://url.spec.whatwg.org/#concept-url\">URL</a> <var data-type=\"URL\">manifest URL</var>, run the\n            following:",
      "rationale": "if",
      "steps": [
        {
          "html": "If <var data-type=\"ordered map\">json tab strip</var>[\"home_tab\"] does not exist or <var>json tab\n            strip</var>[\"home_tab\"] not an <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a>, return."
        },
        {
          "html": "Let <var data-type=\"ordered map\">home tab</var> be a new <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a>."
        },
        {
          "html": "<a data-link-type=\"dfn|abstract-op\" href=\"https://wicg.github.io/manifest-incubations/#dfn-process-the-scope_patterns-member\" class=\"internalDFN\" id=\"ref-for-dfn-process-the-scope_patterns-member-1\">Process the <code>scope_patterns</code> member</a> passing <var>json tab\n            strip</var>[\"home_tab\"][\"scope_patterns\"], <var data-type=\"ordered map\">home tab</var> and <var>manifest\n            URL</var>."
        },
        {
          "html": "Set <var>manifest tab strip</var>[\"home_tab\"] to <var data-type=\"ordered map\">home tab</var>."
        }
      ]
    },
    {
      "name": "process the new_tab_button member",
      "href": "https://wicg.github.io/manifest-incubations/#dfn-process-the-new_tab_button-member",
      "html": "To <dfn id=\"dfn-process-the-new_tab_button-member\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">process the <code>new_tab_button</code> member</dfn>, given <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a> <var data-type=\"ordered map\">json tab strip</var>, <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a> <var data-type=\"ordered map\">manifest tab\n            strip</var>, <a data-link-type=\"dfn\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url\" href=\"https://url.spec.whatwg.org/#concept-url\">URL</a> <var data-type=\"URL\">manifest URL</var>, and <a data-link-type=\"dfn\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url\" href=\"https://url.spec.whatwg.org/#concept-url\">URL</a> <var data-type=\"URL\">start\n            URL</var>, run the following:",
      "rationale": "set",
      "steps": [
        {
          "html": "Set <var>manifest tab strip</var>[\"new_tab_button\"][\"url\"] to <var data-type=\"URL\">start\n            URL</var>."
        },
        {
          "html": "If <var data-type=\"ordered map\">json tab strip</var>[\"new_tab_button\"] does not exist or <var>json\n            tab strip</var>[\"new_tab_button\"] is not an <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a>, return."
        },
        {
          "html": "Let <var data-type=\"URL\">url</var> be the result of <a data-link-type=\"dfn\" data-lt=\"URL Parser\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url-parser\" href=\"https://url.spec.whatwg.org/#concept-url-parser\">parsing</a> <var>json tab\n            strip</var>[\"new_tab_button\"][\"url\"] with <var data-type=\"URL\">manifest URL</var> as the base\n            URL."
        },
        {
          "html": "If <var data-type=\"URL\">url</var> is failure, return."
        },
        {
          "html": "If <var data-type=\"URL\">url</var> is not <a data-link-type=\"dfn\" data-link-for=\"URL\" data-xref-for=\"URL\" data-cite=\"appmanifest\" data-cite-path=\"\" data-cite-frag=\"dfn-within-scope\" href=\"https://www.w3.org/TR/appmanifest/#dfn-within-scope\">within scope</a> of <var data-type=\"URL\">manifest URL</var>, return."
        },
        {
          "html": "Set <var>manifest tab strip</var>[\"new_tab_button\"][\"url\"] to <var data-type=\"URL\">url</var>."
        }
      ]
    },
    {
      "name": "process the scope_patterns member",
      "href": "https://wicg.github.io/manifest-incubations/#dfn-process-the-scope_patterns-member",
      "html": "To <dfn id=\"dfn-process-the-scope_patterns-member\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">process the <code>scope_patterns</code> member</dfn>, given <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a> <var data-type=\"ordered map\">json home tab</var>, <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a> <var data-type=\"ordered map\">manifest home\n            tab</var> and <a data-link-type=\"dfn\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url\" href=\"https://url.spec.whatwg.org/#concept-url\">URL</a> <var data-type=\"URL\">manifest URL</var>, run the following:",
      "rationale": "let",
      "steps": [
        {
          "html": "Let <var data-type=\"list\">processed scope patterns</var> be a new <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list\" href=\"https://infra.spec.whatwg.org/#list\">list</a>."
        },
        {
          "html": "Set <var>manifest home tab</var>[\"scope_patterns\"] to <var>processed scope\n            patterns</var>."
        },
        {
          "html": "If <var data-type=\"ordered map\">json home tab</var>[\"scope_patterns\"] doesn't exist or <var>json\n            home tab</var>[\"scope_patterns\"] is not a <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list\" href=\"https://infra.spec.whatwg.org/#list\">list</a>, return."
        },
        {
          "html": "For each <var data-type=\"URLPatternInit\">entry</var> of <var>json home\n            tab</var>[\"scope_patterns\"]:",
          "rationale": "let",
          "steps": [
            {
              "html": "Let <var data-type=\"URL pattern\">pattern</var> be the result of <a data-link-type=\"dfn\" data-lt=\"build a URL pattern from an infra value\" data-cite=\"urlpattern\" data-cite-path=\"\" data-cite-frag=\"build-a-url-pattern-from-an-infra-value\" href=\"https://urlpattern.spec.whatwg.org/#build-a-url-pattern-from-an-infra-value\">building a URL pattern from an infra value</a> <var data-type=\"URLPatternInit\">entry</var> given <var data-type=\"URL\">manifest URL</var>. If this process\n                throws or returns null, continue."
            },
            {
              "html": "Append <var data-type=\"URL pattern\">pattern</var> to <var data-type=\"list\">processed scope patterns</var>."
            }
          ]
        }
      ]
    },
    {
      "name": "process the note_taking member",
      "href": "https://wicg.github.io/manifest-incubations/#dfn-process-the-note_taking-member",
      "html": "To <dfn id=\"dfn-process-the-note_taking-member\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">process the <code>note_taking</code> member</dfn>, given <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a>\n          <var data-type=\"ordered map\">json</var>, <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a> <var data-type=\"ordered map\">manifest</var>, <a data-link-type=\"dfn\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url\" href=\"https://url.spec.whatwg.org/#concept-url\">URL</a>\n          <var data-type=\"URL\">manifest_URL</var>, run the following during the <a data-cite=\"appmanifest#dfn-processing-extension-point-of-web-manifest\" href=\"https://www.w3.org/TR/appmanifest/#dfn-processing-extension-point-of-web-manifest\">extension\n          point</a> in <a data-link-type=\"dfn\" data-cite=\"appmanifest\" data-cite-path=\"\" data-cite-frag=\"dfn-processing-a-manifest\" href=\"https://www.w3.org/TR/appmanifest/#dfn-processing-a-manifest\">processing a manifest</a>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "If <var data-type=\"ordered map\">json</var>[\"note_taking\"] does not <a data-link-type=\"dfn\" data-link-for=\"map\" data-xref-for=\"map\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"map-exists\" href=\"https://infra.spec.whatwg.org/#map-exists\">exist</a>, return."
        },
        {
          "html": "If the type of <var data-type=\"ordered map\">json</var>[\"note_taking\"] is not <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a>,\n          return."
        },
        {
          "html": "Set <var data-type=\"ordered map\">manifest</var>[\"note_taking\"] to a new <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a>."
        },
        {
          "html": "<a data-link-type=\"dfn|abstract-op\" href=\"https://wicg.github.io/manifest-incubations/#dfn-process-the-new_note_url-member\" class=\"internalDFN\" id=\"ref-for-dfn-process-the-new_note_url-member-1\">process the <code>new_note_url</code> member</a> passing\n          <var data-type=\"ordered map\">json</var>[\"note_taking\"], <var data-type=\"ordered map\">manifest</var>[\"note_taking\"], and <var>manifest URL</var>."
        }
      ]
    },
    {
      "name": "process the new_note_url member",
      "href": "https://wicg.github.io/manifest-incubations/#dfn-process-the-new_note_url-member",
      "html": "To <dfn id=\"dfn-process-the-new_note_url-member\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">process the <code>new_note_url</code> member</dfn>, given <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a> <var data-type=\"ordered map\">json_note_taking</var>, <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a>\n          <var data-type=\"ordered map\">manifest_note_taking</var>, <a data-link-type=\"dfn\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url\" href=\"https://url.spec.whatwg.org/#concept-url\">URL</a> <var data-type=\"URL\">manifest_URL</var>, run\n          the following:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "If <var data-type=\"ordered map\">json_note_taking</var>[\"new_note_url\"] does not <a data-link-type=\"dfn\" data-link-for=\"map\" data-xref-for=\"map\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"map-exists\" href=\"https://infra.spec.whatwg.org/#map-exists\">exist</a>,\n          return."
        },
        {
          "html": "If the type of <var data-type=\"ordered map\">json_note_taking</var>[\"new_note_url\"] is not\n          <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"string\" href=\"https://infra.spec.whatwg.org/#string\">string</a>, return."
        },
        {
          "html": "Let <var data-type=\"URL\">new_note_url</var> be the result of <a data-link-type=\"dfn\" data-lt=\"URL Parser\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url-parser\" href=\"https://url.spec.whatwg.org/#concept-url-parser\">parsing</a>\n          <var data-type=\"ordered map\">json_note_taking</var>[\"new_note_url\"] with <var>manifest URL</var> as the base\n          URL."
        },
        {
          "html": "If <var data-type=\"URL\">new_note_url</var> is failure, return."
        },
        {
          "html": "If <var data-type=\"URL\">new_note_url</var> is not <a data-link-type=\"dfn\" data-link-for=\"manifest\" data-xref-for=\"manifest\" data-cite=\"appmanifest\" data-cite-path=\"\" data-cite-frag=\"dfn-within-scope-0\" href=\"https://www.w3.org/TR/appmanifest/#dfn-within-scope-0\">within scope</a> of <var>manifest\n          URL</var>, return."
        },
        {
          "html": "Set manifest_note_taking[\"new_note_url\"] to <var data-type=\"URL\">new_note_url</var>."
        }
      ]
    },
    {
      "name": "launch the new_note_url",
      "href": "https://wicg.github.io/manifest-incubations/#dfn-launch-the-new_note_url",
      "html": "To <dfn id=\"dfn-launch-the-new_note_url\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">launch the <code>new_note_url</code></dfn>, given <a data-cite=\"appmanifest#dfn-processed-manifest\" href=\"https://www.w3.org/TR/appmanifest/#dfn-processed-manifest\">processed manifest</a>\n          <var data-type=\"processed manifest\">manifest</var>, run the following steps:",
      "rationale": "if",
      "steps": [
        {
          "html": "If <var data-type=\"processed manifest\">manifest</var>[\"note_taking\"] does not <a data-link-type=\"dfn\" data-link-for=\"map\" data-xref-for=\"map\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"map-exists\" href=\"https://infra.spec.whatwg.org/#map-exists\">exist</a>, return."
        },
        {
          "html": "If <var data-type=\"processed manifest\">manifest</var>[\"note_taking\"][\"new_note_url\"] does not\n          <a data-link-type=\"dfn\" data-link-for=\"map\" data-xref-for=\"map\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"map-exists\" href=\"https://infra.spec.whatwg.org/#map-exists\">exist</a>, return."
        },
        {
          "html": "If the type of <var data-type=\"processed manifest\">manifest</var>[\"note_taking\"][\"new_note_url\"] is not\n          <a data-link-type=\"dfn\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url\" href=\"https://url.spec.whatwg.org/#concept-url\">URL</a>, return."
        },
        {
          "html": "Run the steps to <a data-link-type=\"dfn\" data-cite=\"appmanifest\" data-cite-path=\"\" data-cite-frag=\"dfn-launching-a-web-application\" href=\"https://www.w3.org/TR/appmanifest/#dfn-launching-a-web-application\">launch a web application</a> setting <var data-type=\"processed manifest\">manifest</var>\n          to <var data-type=\"processed manifest\">manifest</var> and <var>target URL</var> to\n          <var data-type=\"processed manifest\">manifest</var>[\"note_taking\"][\"new_note_url\"]."
        }
      ]
    },
    {
      "name": "process the protocol_handlers member",
      "href": "https://wicg.github.io/manifest-incubations/#dfn-process-the-protocol_handlers-member",
      "html": "To <dfn id=\"dfn-process-the-protocol_handlers-member\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">process the <code>protocol_handlers</code> member</dfn>, given\n          <a data-link-type=\"element\" data-cite=\"html\" data-cite-path=\"/iframe-embed-object.html\" data-cite-frag=\"the-object-element\" href=\"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-object-element\">object</a> <var data-type=\"JSON\">json</var>, <var data-type=\"ordered map\">manifest</var>:",
      "rationale": "let",
      "steps": [
        {
          "html": "Let <var>processedProtocolHandlers</var> be a new <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list\" href=\"https://infra.spec.whatwg.org/#list\">list</a> of\n          <var data-type=\"JSON\">json</var>[\"<var>protocol_handlers</var>\"]."
        },
        {
          "html": "Set manifest[\"<var>protocol_handlers</var>\"] to\n          <var>processedProtocolHandlers</var>."
        },
        {
          "html": "<a data-link-type=\"dfn\" data-link-for=\"list\" data-xref-for=\"list\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list-iterate\" href=\"https://infra.spec.whatwg.org/#list-iterate\">For each</a> <var>protocol_handler</var> (<a href=\"https://wicg.github.io/manifest-incubations/#dfn-protocol-handler-description\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-protocol-handler-description-2\">protocol handler\n          description</a>):",
          "rationale": "if",
          "steps": [
            {
              "html": "If <var>protocol_handler</var>[\"protocol\"] or\n              <var>protocol_handler</var>[\"url\"] is undefined, <a data-link-type=\"dfn\" data-link-for=\"iteration\" data-xref-for=\"iteration\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"iteration-continue\" href=\"https://infra.spec.whatwg.org/#iteration-continue\">continue</a>."
            },
            {
              "html": "Let (<var data-type=\"string\">normalizedProtocol</var>, <var data-type=\"URL\">normalizedUrl</var>) be the\n              result of running <a data-link-type=\"dfn\" data-cite=\"html\" data-cite-path=\"/system-state.html\" data-cite-frag=\"normalize-protocol-handler-parameters\" href=\"https://html.spec.whatwg.org/multipage/system-state.html#normalize-protocol-handler-parameters\">normalize protocol handler parameters</a> with\n              <var>protocol_handler</var>[\"protocol\"], | protocol_handler|[\"url\"] using\n              <var>manifest URL</var> as the base URL, and <a data-link-type=\"dfn\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>'s relevant\n              <a data-link-type=\"dfn\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"environment-settings-object\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object\">environment settings object</a>. If the result is failure,\n              <a data-link-type=\"dfn\" data-link-for=\"iteration\" data-xref-for=\"iteration\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"iteration-continue\" href=\"https://infra.spec.whatwg.org/#iteration-continue\">continue</a>."
            },
            {
              "html": "If <var data-type=\"URL\">normalizedUrl</var> is not <a data-link-type=\"dfn\" data-link-for=\"manifest\" data-xref-for=\"manifest\" data-cite=\"appmanifest\" data-cite-path=\"\" data-cite-frag=\"dfn-within-scope-0\" href=\"https://www.w3.org/TR/appmanifest/#dfn-within-scope-0\">within scope</a> of\n              <var data-type=\"ordered map\">manifest</var>, <a data-link-type=\"dfn\" data-link-for=\"iteration\" data-xref-for=\"iteration\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"iteration-continue\" href=\"https://infra.spec.whatwg.org/#iteration-continue\">continue</a>."
            },
            {
              "html": "If <var>processedProtocolHandlers</var> <a data-link-type=\"dfn\" data-link-for=\"list\" data-xref-for=\"list\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list-contain\" href=\"https://infra.spec.whatwg.org/#list-contain\">contains</a> the\n              <var data-type=\"URL\">normalizedUrl</var>, <a data-link-type=\"dfn\" data-link-for=\"iteration\" data-xref-for=\"iteration\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"iteration-continue\" href=\"https://infra.spec.whatwg.org/#iteration-continue\">continue</a>."
            },
            {
              "html": "<a data-link-type=\"dfn\" data-link-for=\"list\" data-xref-for=\"List\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list-append\" href=\"https://infra.spec.whatwg.org/#list-append\">Append</a> <var>protocol_handler</var> to\n              <var>processedProtocolHandlers</var>."
            }
          ]
        },
        {
          "html": "<a data-link-type=\"dfn\" data-link-for=\"list\" data-xref-for=\"list\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list-iterate\" href=\"https://infra.spec.whatwg.org/#list-iterate\">For each</a> <var>processedProtocolHandlers</var>, the user agent\n          <em class=\"rfc2119\">SHOULD</em> <a data-link-type=\"dfn\" data-cite=\"html\" data-cite-path=\"/system-state.html\" data-cite-frag=\"protocol-handler-registration\" href=\"https://html.spec.whatwg.org/multipage/system-state.html#protocol-handler-registration\">register a protocol handler</a>."
        }
      ]
    },
    {
      "name": "process the file_handlers member",
      "href": "https://wicg.github.io/manifest-incubations/#dfn-process-the-file_handlers-member",
      "html": "To <dfn id=\"dfn-process-the-file_handlers-member\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">process the <code>file_handlers</code> member</dfn>, given <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a>\n        <var data-type=\"ordered map\">json</var>, <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a> <var data-type=\"ordered map\">manifest</var>, <a data-link-type=\"dfn\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url\" href=\"https://url.spec.whatwg.org/#concept-url\">URL</a>\n        <var data-type=\"URL\">manifest_url</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "Let <var data-type=\"list\">processedFileHandlers</var> be a new <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list\" href=\"https://infra.spec.whatwg.org/#list\">list</a>."
        },
        {
          "html": "Set <var data-type=\"ordered map\">manifest</var>[\"file_handlers\"] to <var data-type=\"list\">processedFileHandlers</var>."
        },
        {
          "html": "If <var data-type=\"ordered map\">json</var>[\"file_handlers\"] doesn't <a data-link-type=\"dfn\" data-link-for=\"map\" data-xref-for=\"map\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"map-exists\" href=\"https://infra.spec.whatwg.org/#map-exists\">exist</a> or\n        <var data-type=\"ordered map\">json</var>[\"file_handlers\"] is not a <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list\" href=\"https://infra.spec.whatwg.org/#list\">list</a>, return."
        },
        {
          "html": "<a data-link-type=\"dfn\" data-link-for=\"list\" data-xref-for=\"list\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list-iterate\" href=\"https://infra.spec.whatwg.org/#list-iterate\">For each</a> <var data-type=\"ordered map\">entry</var> of <var data-type=\"ordered map\">json</var>[\"file_handlers\"]:",
          "rationale": "let",
          "steps": [
            {
              "html": "Let <var data-type=\"ordered map\">file_handler</var> be <a data-link-type=\"dfn|abstract-op\" href=\"https://wicg.github.io/manifest-incubations/#dfn-process-a-file-handler-item\" class=\"internalDFN\" id=\"ref-for-dfn-process-a-file-handler-item-1\">process a file handler item</a> with <var data-type=\"ordered map\">entry</var>, <a data-link-type=\"dfn\" data-link-for=\"manifest\" data-xref-for=\"manifest\" data-cite=\"appmanifest\" data-cite-path=\"\" data-cite-frag=\"dfn-start_url\" href=\"https://www.w3.org/TR/appmanifest/#dfn-start_url\">start_url</a>, <a data-link-type=\"dfn\" data-link-for=\"manifest\" data-xref-for=\"manifest\" data-cite=\"appmanifest\" data-cite-path=\"\" data-cite-frag=\"dfn-scope\" href=\"https://www.w3.org/TR/appmanifest/#dfn-scope\">scope</a>,\n            and <var data-type=\"URL\">manifest_url</var>."
            },
            {
              "html": "If <var data-type=\"ordered map\">file_handler</var> is failure, <a data-link-type=\"dfn\" data-link-for=\"iteration\" data-xref-for=\"iteration\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"iteration-continue\" href=\"https://infra.spec.whatwg.org/#iteration-continue\">continue</a>."
            },
            {
              "html": "<a data-link-type=\"dfn\" data-link-for=\"list\" data-xref-for=\"list\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list-append\" href=\"https://infra.spec.whatwg.org/#list-append\">Append</a> <var data-type=\"ordered map\">file_handler</var> to <var data-type=\"list\">processedFileHandlers</var>."
            }
          ]
        }
      ]
    },
    {
      "name": "process a file handler item",
      "href": "https://wicg.github.io/manifest-incubations/#dfn-process-a-file-handler-item",
      "html": "To <dfn id=\"dfn-process-a-file-handler-item\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">process a file handler item</dfn>, given <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a>\n          <var data-type=\"ordered map\">item</var>, <a data-link-type=\"dfn\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url\" href=\"https://url.spec.whatwg.org/#concept-url\">URL</a> <var data-type=\"URL\">start_url</var>, <a data-link-type=\"dfn\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url\" href=\"https://url.spec.whatwg.org/#concept-url\">URL</a> <var data-type=\"URL\">scope</var>, and\n          <a data-link-type=\"dfn\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url\" href=\"https://url.spec.whatwg.org/#concept-url\">URL</a> <var data-type=\"URL\">manifest URL</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "Return failure if any of the following is true:\n            <ul>\n              <li><var data-type=\"ordered map\">item</var>[\"action\"] doesn't <a data-link-type=\"dfn\" data-link-for=\"map\" data-xref-for=\"map\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"map-exists\" href=\"https://infra.spec.whatwg.org/#map-exists\">exist</a> or is not a\n              <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"string\" href=\"https://infra.spec.whatwg.org/#string\">string</a>.\n              </li>\n              <li><var data-type=\"ordered map\">item</var>[\"accept\"] doesn't <a data-link-type=\"dfn\" data-link-for=\"map\" data-xref-for=\"map\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"map-exists\" href=\"https://infra.spec.whatwg.org/#map-exists\">exist</a>.\n              </li>\n              <li><var data-type=\"ordered map\">item</var>[\"accept\"] is not a <a data-link-type=\"dfn\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"dfn-dictionary\" href=\"https://webidl.spec.whatwg.org/#dfn-dictionary\">dictionary</a>.\n              </li>\n              <li><var data-type=\"ordered map\">item</var>[\"accept\"] <a data-link-type=\"dfn\" data-link-for=\"map\" data-xref-for=\"map\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"map-is-empty\" href=\"https://infra.spec.whatwg.org/#map-is-empty\">is empty</a>.\n              </li>\n            </ul>"
        },
        {
          "html": "Let <var data-type=\"URL\">url</var> be the result of <a data-link-type=\"dfn\" data-lt=\"URL Parser\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url-parser\" href=\"https://url.spec.whatwg.org/#concept-url-parser\">parsing</a>\n          <var data-type=\"ordered map\">item</var>[\"action\"] with <var>manifest_url URL</var> as the base URL."
        },
        {
          "html": "If <var data-type=\"URL\">url</var> is failure, return failure."
        },
        {
          "html": "If <var data-type=\"URL\">url</var> is not <a data-link-type=\"dfn\" data-link-for=\"manifest\" data-xref-for=\"manifest\" data-cite=\"appmanifest\" data-cite-path=\"\" data-cite-frag=\"dfn-within-scope-0\" href=\"https://www.w3.org/TR/appmanifest/#dfn-within-scope-0\">within scope</a> of <var data-type=\"URL\">scope</var>, return\n          failure."
        },
        {
          "html": "Let <var data-type=\"string\">launch_type</var> be a new <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"string\" href=\"https://infra.spec.whatwg.org/#string\">string</a> initialized to\n          \"single-client\"."
        },
        {
          "html": "If <var data-type=\"ordered map\">item</var>[\"launch_type\"] <a data-link-type=\"dfn\" data-link-for=\"map\" data-xref-for=\"map\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"map-exists\" href=\"https://infra.spec.whatwg.org/#map-exists\">exists</a> and is\n          \"multiple-clients\", set <var data-type=\"string\">launch_type</var> to <var data-type=\"ordered map\">item</var>[\"launch_type\"]."
        },
        {
          "html": "Let <var data-type=\"ordered map\">accept</var> be a new <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a>."
        },
        {
          "html": "<a data-link-type=\"dfn\" data-link-for=\"map\" data-xref-for=\"map\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"map-iterate\" href=\"https://infra.spec.whatwg.org/#map-iterate\">for each</a> <var data-type=\"string\">mime_type_string</var> → <var>extensions</var> of\n          <var data-type=\"ordered map\">item</var>[\"accept\"]",
          "rationale": "if",
          "steps": [
            {
              "html": "If <var>extensions</var> is not a <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list\" href=\"https://infra.spec.whatwg.org/#list\">list</a>, <a data-link-type=\"dfn\" data-link-for=\"iteration\" data-xref-for=\"iteration\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"iteration-continue\" href=\"https://infra.spec.whatwg.org/#iteration-continue\">continue</a>."
            },
            {
              "html": "If <var>extensions</var> is <a data-link-type=\"dfn\" data-link-for=\"list\" data-xref-for=\"list\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list-empty\" href=\"https://infra.spec.whatwg.org/#list-empty\">empty</a>, <a data-link-type=\"dfn\" data-link-for=\"iteration\" data-xref-for=\"iteration\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"iteration-continue\" href=\"https://infra.spec.whatwg.org/#iteration-continue\">continue</a>."
            },
            {
              "html": "If <var>extensions</var> <a data-link-type=\"dfn\" data-link-for=\"list\" data-xref-for=\"list\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list-contain\" href=\"https://infra.spec.whatwg.org/#list-contain\">contains</a> items that are not\n              <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"string\" href=\"https://infra.spec.whatwg.org/#string\">string</a>s, <a data-link-type=\"dfn\" data-link-for=\"iteration\" data-xref-for=\"iteration\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"iteration-continue\" href=\"https://infra.spec.whatwg.org/#iteration-continue\">continue</a>."
            },
            {
              "html": "If <var>extensions</var> <a data-link-type=\"dfn\" data-link-for=\"list\" data-xref-for=\"list\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list-contain\" href=\"https://infra.spec.whatwg.org/#list-contain\">contains</a> strings that do not begin\n              with the character <code>.</code>, <a data-link-type=\"dfn\" data-link-for=\"iteration\" data-xref-for=\"iteration\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"iteration-continue\" href=\"https://infra.spec.whatwg.org/#iteration-continue\">continue</a>."
            },
            {
              "html": "If <var>extensions</var> <a data-link-type=\"dfn\" data-link-for=\"list\" data-xref-for=\"list\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list-contain\" href=\"https://infra.spec.whatwg.org/#list-contain\">contains</a> strings that are greater\n              than 16 characters long, <a data-link-type=\"dfn\" data-link-for=\"iteration\" data-xref-for=\"iteration\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"iteration-continue\" href=\"https://infra.spec.whatwg.org/#iteration-continue\">continue</a>."
            },
            {
              "html": "Let <var data-type=\"mime type\">mime_type_parsed</var> be the result of running the\n              steps of <a data-link-type=\"dfn\" data-cite=\"mimesniff\" data-cite-path=\"\" data-cite-frag=\"parse-a-mime-type\" href=\"https://mimesniff.spec.whatwg.org/#parse-a-mime-type\">parse a mime type</a> on <var data-type=\"string\">mime_type_string</var>."
            },
            {
              "html": "If <var data-type=\"mime type\">mime_type_parsed</var> is failure,\n              <a data-link-type=\"dfn\" data-link-for=\"iteration\" data-xref-for=\"iteration\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"iteration-continue\" href=\"https://infra.spec.whatwg.org/#iteration-continue\">continue</a>."
            },
            {
              "html": "If |mime_type_parsed/type| is not listed as a top-level type\n              in [<cite><a class=\"bibref\" data-link-type=\"biblio\" href=\"https://wicg.github.io/manifest-incubations/#bib-iana-media-types\" title=\"Media Types\">IANA-MEDIA-TYPES</a></cite>], <a data-link-type=\"dfn\" data-link-for=\"iteration\" data-xref-for=\"iteration\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"iteration-continue\" href=\"https://infra.spec.whatwg.org/#iteration-continue\">continue</a>."
            },
            {
              "html": "Set <var data-type=\"ordered map\">accept</var>[<var data-type=\"string\">mime_type_string</var>] to <var>extensions</var>."
            }
          ]
        },
        {
          "html": "If <var data-type=\"ordered map\">accept</var> is empty, return failure."
        },
        {
          "html": "Let <var data-type=\"ordered map\">file_handler</var> be <var>ordered map</var> «[ \"action\" →\n          <var data-type=\"URL\">url</var>, \"name\" → <var data-type=\"ordered map\">item</var>[\"name\"], \"launch_type\" → <var data-type=\"string\">launch_type</var>,\n          \"accept\" → <var data-type=\"ordered map\">accept</var> ]»."
        },
        {
          "html": "<a data-cite=\"appmanifest#dfn-process-image-resources\" href=\"https://www.w3.org/TR/appmanifest/#dfn-process-image-resources\">Process\n            image resources</a> passing <var data-type=\"ordered map\">item</var>[\"icons\"], <var data-type=\"ordered map\">file_handler</var>,\n            <var data-type=\"URL\">manifest URL</var>, and \"icons\"."
        },
        {
          "html": "Return <var data-type=\"ordered map\">file_handler</var>."
        }
      ]
    },
    {
      "name": "execute a file handler launch",
      "href": "https://wicg.github.io/manifest-incubations/#dfn-execute-a-file-handler-launch",
      "html": "The steps to <dfn id=\"dfn-execute-a-file-handler-launch\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">execute a file handler launch</dfn> are given by\n          the following algorithm. The algorithm takes <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list\" href=\"https://infra.spec.whatwg.org/#list\">list</a> <var data-type=\"list\">files</var>\n          and a <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a> <var data-type=\"ordered_map\">manifest</var> which holds results from\n          <a data-link-type=\"dfn\" data-cite=\"appmanifest\" data-cite-path=\"\" data-cite-frag=\"dfn-processing-a-manifest\" href=\"https://www.w3.org/TR/appmanifest/#dfn-processing-a-manifest\">processing a manifest</a>.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "Let <var data-type=\"list\">file_handlers</var> be <var data-type=\"ordered_map\">manifest</var>[\"file_handlers\"]."
        },
        {
          "html": "If <var data-type=\"list\">file_handlers</var> is null, return."
        },
        {
          "html": "Let <var data-type=\"ordered map\">launches</var> be an <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a>."
        },
        {
          "html": "<a data-link-type=\"dfn\" data-link-for=\"list\" data-xref-for=\"list\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list-iterate\" href=\"https://infra.spec.whatwg.org/#list-iterate\">for each</a> <var data-type=\"string\">filename</var> of <var data-type=\"list\">files</var>",
          "rationale": "for",
          "steps": [
            {
              "html": "<a data-link-type=\"dfn\" data-link-for=\"list\" data-xref-for=\"list\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list-iterate\" href=\"https://infra.spec.whatwg.org/#list-iterate\">for each</a> <var data-type=\"ordered_map\">file_handler</var> of\n              <var data-type=\"list\">file_handlers</var>:",
              "rationale": "for",
              "steps": [
                {
                  "html": "<a data-link-type=\"dfn\" data-link-for=\"map\" data-xref-for=\"map\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"map-iterate\" href=\"https://infra.spec.whatwg.org/#map-iterate\">for each</a> <var data-type=\"string\">mime_type_string</var> →\n                  <var data-type=\"list\">extensions</var> of <var data-type=\"ordered_map\">file_handler</var>[\"accept\"]",
                  "rationale": "for",
                  "steps": [
                    {
                      "html": "<a data-link-type=\"dfn\" data-link-for=\"list\" data-xref-for=\"list\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list-iterate\" href=\"https://infra.spec.whatwg.org/#list-iterate\">for each</a> <var data-type=\"string\">extension</var> of <var data-type=\"list\">extensions</var>:",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "If <var data-type=\"string\">filename</var> does not end in <var data-type=\"string\">extension</var>,\n                          <a data-link-type=\"dfn\" data-link-for=\"iteration\" data-xref-for=\"iteration\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"iteration-continue\" href=\"https://infra.spec.whatwg.org/#iteration-continue\">continue</a>."
                        },
                        {
                          "html": "If <var data-type=\"ordered map\">launches</var>[<var data-type=\"ordered_map\">file_handler</var>] <a data-link-type=\"dfn\" data-link-for=\"map\" data-xref-for=\"map\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"map-exists\" href=\"https://infra.spec.whatwg.org/#map-exists\">exists</a>,\n                          <a data-link-type=\"dfn\" data-link-for=\"list\" data-xref-for=\"list\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list-append\" href=\"https://infra.spec.whatwg.org/#list-append\">append</a> <var data-type=\"string\">filename</var> to\n                          <var data-type=\"ordered map\">launches</var>[<var data-type=\"ordered_map\">file_handler</var>]."
                        },
                        {
                          "html": "Else, set <var data-type=\"ordered map\">launches</var>[<var data-type=\"ordered_map\">file_handler</var>] to a\n                          <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list\" href=\"https://infra.spec.whatwg.org/#list\">list</a> with the single element <var data-type=\"string\">filename</var>."
                        },
                        {
                          "html": "<a data-link-type=\"dfn\" data-link-for=\"iteration\" data-xref-for=\"iteration\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"iteration-continue\" href=\"https://infra.spec.whatwg.org/#iteration-continue\">Continue</a> to next element of\n                          <var data-type=\"list\">files</var>."
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "html": "<a data-link-type=\"dfn\" data-link-for=\"map\" data-xref-for=\"map\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"map-iterate\" href=\"https://infra.spec.whatwg.org/#map-iterate\">for each</a> <var data-type=\"ordered_map\">file_handler</var> → <var data-type=\"list\">files</var> of <var data-type=\"ordered map\">launches</var>",
          "rationale": "if",
          "steps": [
            {
              "html": "If <var data-type=\"ordered_map\">file_handler</var>[\"launch_type\"] is equal to\n              \"multiple-clients\"",
              "rationale": "for",
              "steps": [
                {
                  "html": "<a data-link-type=\"dfn\" data-link-for=\"list\" data-xref-for=\"list\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list-iterate\" href=\"https://infra.spec.whatwg.org/#list-iterate\">for each</a> <var>file</var> of <var data-type=\"list\">files</var>",
                  "rationale": "let",
                  "steps": [
                    {
                      "html": "Let <var data-type=\"LaunchParams\">params</var> be a new <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"LaunchParams\" data-cite=\"web-app-launch\" data-cite-path=\"\" data-cite-frag=\"dom-launchparams\" href=\"https://wicg.github.io/web-app-launch/#dom-launchparams\"><code>LaunchParams</code></a>\n                      with <a data-link-type=\"attribute\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"LaunchParams\" data-xref-for=\"LaunchParams\" data-cite=\"web-app-launch\" data-cite-path=\"\" data-cite-frag=\"dom-launchparams-files\" href=\"https://wicg.github.io/web-app-launch/#dom-launchparams-files\"><code>files</code></a> set to a <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"FrozenArray\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"idl-frozen-array\" href=\"https://webidl.spec.whatwg.org/#idl-frozen-array\"><code>FrozenArray</code></a> with\n                      a single element that is a <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"FileSystemHandle\" data-cite=\"fs\" data-cite-path=\"\" data-cite-frag=\"filesystemhandle\" href=\"https://fs.spec.whatwg.org/#filesystemhandle\"><code>FileSystemHandle</code></a>\n                      corresponding to <var>file</var>."
                    },
                    {
                      "html": "<a data-link-type=\"dfn\" data-cite=\"web-app-launch\" data-cite-path=\"\" data-cite-frag=\"dfn-launching-a-web-application-with-handling\" href=\"https://wicg.github.io/web-app-launch/#dfn-launching-a-web-application-with-handling\">Launch a web application with handling</a>, passing\n                      <var data-type=\"ordered_map\">manifest</var> and <var data-type=\"LaunchParams\">params</var>."
                    }
                  ]
                }
              ]
            },
            {
              "html": "Else,",
              "rationale": "let",
              "steps": [
                {
                  "html": "Let <var data-type=\"LaunchParams\">params</var> be a new <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"LaunchParams\" data-cite=\"web-app-launch\" data-cite-path=\"\" data-cite-frag=\"dom-launchparams\" href=\"https://wicg.github.io/web-app-launch/#dom-launchparams\"><code>LaunchParams</code></a> with\n                  <a data-link-type=\"attribute\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"LaunchParams\" data-xref-for=\"LaunchParams\" data-cite=\"web-app-launch\" data-cite-path=\"\" data-cite-frag=\"dom-launchparams-files\" href=\"https://wicg.github.io/web-app-launch/#dom-launchparams-files\"><code>files</code></a> set to a <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"FrozenArray\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"idl-frozen-array\" href=\"https://webidl.spec.whatwg.org/#idl-frozen-array\"><code>FrozenArray</code></a> of\n                  <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"FileSystemHandle\" data-cite=\"fs\" data-cite-path=\"\" data-cite-frag=\"filesystemhandle\" href=\"https://fs.spec.whatwg.org/#filesystemhandle\"><code>FileSystemHandle</code></a>s that correspond to the file paths named\n                  by <var data-type=\"list\">files</var>."
                },
                {
                  "html": "<a data-link-type=\"dfn\" data-cite=\"web-app-launch\" data-cite-path=\"\" data-cite-frag=\"dfn-launching-a-web-application-with-handling\" href=\"https://wicg.github.io/web-app-launch/#dfn-launching-a-web-application-with-handling\">Launch a web application with handling</a>, passing\n                  <var data-type=\"ordered_map\">manifest</var> and <var data-type=\"LaunchParams\">params</var>."
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "process the related_applications member",
      "href": "https://wicg.github.io/manifest-incubations/#dfn-process-the-related_applications-member",
      "html": "To <dfn id=\"dfn-process-the-related_applications-member\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">process the <code>related_applications</code> member</dfn>, given\n        <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a> <var data-type=\"ordered map\">json</var> and <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a>\n        <var data-type=\"ordered map\">manifest</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "Let <var data-type=\"list\">relatedApplications</var> be a new <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list\" href=\"https://infra.spec.whatwg.org/#list\">list</a>."
        },
        {
          "html": "Set <var data-type=\"ordered map\">manifest</var>[\"related_applications\"] to <var data-type=\"list\">relatedApplications</var>."
        },
        {
          "html": "If <var data-type=\"ordered map\">json</var>[\"related_applications\"] doesn't <a data-link-type=\"dfn\" data-link-for=\"map\" data-xref-for=\"map\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"map-exists\" href=\"https://infra.spec.whatwg.org/#map-exists\">exist</a> or\n        <var data-type=\"ordered map\">json</var>[\"related_applications\"] is not a <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list\" href=\"https://infra.spec.whatwg.org/#list\">list</a>, return."
        },
        {
          "html": "<a data-link-type=\"dfn\" data-link-for=\"list\" data-xref-for=\"list\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list-iterate\" href=\"https://infra.spec.whatwg.org/#list-iterate\">For each</a> <var>app</var> of <var data-type=\"ordered map\">json</var>[\"related_applications\"]:",
          "rationale": "if",
          "steps": [
            {
              "html": "If neither <var>app</var>[\"id\"] nor <var>app</var>[\"url\"] are\n            missing:",
              "rationale": "set",
              "steps": [
                {
                  "html": "Set <var>app</var>[\"url\"] to the result of running\n                <a href=\"https://wicg.github.io/manifest-incubations/#dfn-process-the-url-member-of-an-application\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-process-the-url-member-of-an-application-1\">process the <code>url</code> member of an application</a> given\n                <var>app</var>[\"url\"]."
                },
                {
                  "html": "<a data-link-type=\"dfn\" data-link-for=\"list\" data-xref-for=\"list\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list-append\" href=\"https://infra.spec.whatwg.org/#list-append\">append</a> <var>app</var> to\n                <var data-type=\"list\">relatedApplications</var>."
                }
              ]
            }
          ]
        },
        {
          "html": "Set <var data-type=\"list\">relatedApplications</var>."
        }
      ]
    },
    {
      "name": "matches a validated scope extension",
      "href": "https://wicg.github.io/manifest-incubations/#dfn-matches-a-validated-scope-extension",
      "html": "A <a data-link-type=\"dfn\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url\" href=\"https://url.spec.whatwg.org/#concept-url\">URL</a> <var data-type=\"URL\">target</var> <dfn id=\"dfn-matches-a-validated-scope-extension\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">matches a validated scope extension</dfn> if\n        the following algorithm returns <code>true</code>, given <a data-link-type=\"dfn\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url\" href=\"https://url.spec.whatwg.org/#concept-url\">URL</a> <var data-type=\"URL\">target</var> and\n        <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list\" href=\"https://infra.spec.whatwg.org/#list\">list</a> <var data-type=\"list\">validated_scope_extensions</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<a data-link-type=\"dfn\" data-link-for=\"list\" data-xref-for=\"list\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list-iterate\" href=\"https://infra.spec.whatwg.org/#list-iterate\">For each</a> <var data-type=\"ordered map\">entry</var> of\n          <var data-type=\"list\">validated_scope_extensions</var>:",
          "rationale": "if",
          "steps": [
            {
              "html": "If <var data-type=\"ordered map\">entry</var> is not an <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a>, or <var data-type=\"ordered map\">entry</var>[\"scope\"] does not\n              <a data-link-type=\"dfn\" data-link-for=\"map\" data-xref-for=\"map\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"map-exists\" href=\"https://infra.spec.whatwg.org/#map-exists\">exist</a> or is not a <a data-link-type=\"dfn\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url\" href=\"https://url.spec.whatwg.org/#concept-url\">URL</a>, continue."
            },
            {
              "html": "Let <a data-link-type=\"dfn\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url\" href=\"https://url.spec.whatwg.org/#concept-url\">URL</a> <var data-type=\"URL\">resolved_scope</var> be <var data-type=\"ordered\n              map\">entry</var>[\"scope\"]."
            },
            {
              "html": "If <var data-type=\"URL\">target</var> is <a data-link-type=\"dfn\" data-link-for=\"URL\" data-xref-for=\"URL\" data-cite=\"appmanifest\" data-cite-path=\"\" data-cite-frag=\"dfn-within-scope\" href=\"https://www.w3.org/TR/appmanifest/#dfn-within-scope\">within scope</a> of <var data-type=\"URL\">resolved_scope</var>, return\n              <code>true</code>."
            }
          ]
        },
        {
          "html": "Return <code>false</code>."
        }
      ]
    },
    {
      "name": "process the scope_extensions member",
      "href": "https://wicg.github.io/manifest-incubations/#dfn-process-the-scope_extensions-member",
      "html": "To <dfn id=\"dfn-process-the-scope_extensions-member\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">process the <code>scope_extensions</code> member</dfn>, given <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a> <var data-type=\"ordered map\">json</var>, <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a> <var data-type=\"ordered map\">manifest</var>, and\n        <a data-link-type=\"dfn\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url\" href=\"https://url.spec.whatwg.org/#concept-url\">URL</a> <var data-type=\"URL\">manifest_id</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "Let <var data-type=\"list\">processedScopeExtensions</var> be a new <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list\" href=\"https://infra.spec.whatwg.org/#list\">list</a>."
        },
        {
          "html": "Set <var data-type=\"ordered map\">manifest</var>[\"scope_extensions\"] to <var data-type=\"list\">processedScopeExtensions</var>."
        },
        {
          "html": "If <var data-type=\"ordered map\">json</var>[\"scope_extensions\"] does not <a data-link-type=\"dfn\" data-link-for=\"map\" data-xref-for=\"map\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"map-exists\" href=\"https://infra.spec.whatwg.org/#map-exists\">exist</a> or is not a \n          <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list\" href=\"https://infra.spec.whatwg.org/#list\">list</a>, return."
        },
        {
          "html": "<a data-link-type=\"dfn\" data-link-for=\"list\" data-xref-for=\"list\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list-iterate\" href=\"https://infra.spec.whatwg.org/#list-iterate\">For each</a> <var data-type=\"ordered map\">entry</var> of <var data-type=\"ordered map\">json</var>[\"scope_extensions\"]:",
          "rationale": "if",
          "steps": [
            {
              "html": "If <var data-type=\"ordered map\">entry</var>[\"type\"] or <var data-type=\"ordered map\">entry</var>[\"origin\"] do not <a data-link-type=\"dfn\" data-link-for=\"map\" data-xref-for=\"map\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"map-exists\" href=\"https://infra.spec.whatwg.org/#map-exists\">exist</a>,\n              <a data-link-type=\"dfn\" data-link-for=\"iteration\" data-xref-for=\"iteration\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"iteration-continue\" href=\"https://infra.spec.whatwg.org/#iteration-continue\">continue</a>."
            },
            {
              "html": "If <var data-type=\"ordered map\">entry</var>[\"type\"] is not \"origin\", <a data-link-type=\"dfn\" data-link-for=\"iteration\" data-xref-for=\"iteration\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"iteration-continue\" href=\"https://infra.spec.whatwg.org/#iteration-continue\">continue</a>."
            },
            {
              "html": "If <var data-type=\"ordered map\">entry</var>[\"origin\"] is not a <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"string\" href=\"https://infra.spec.whatwg.org/#string\">string</a>,\n              <a data-link-type=\"dfn\" data-link-for=\"iteration\" data-xref-for=\"iteration\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"iteration-continue\" href=\"https://infra.spec.whatwg.org/#iteration-continue\">continue</a>."
            },
            {
              "html": "Let <a data-link-type=\"dfn\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url\" href=\"https://url.spec.whatwg.org/#concept-url\">URL</a> <var data-type=\"URL\">origin_url</var> be the result of <a data-link-type=\"dfn\" data-lt=\"URL Parser\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url-parser\" href=\"https://url.spec.whatwg.org/#concept-url-parser\">parsing</a> <var data-type=\"ordered map\">entry</var>[\"origin\"]."
            },
            {
              "html": "If <var data-type=\"URL\">origin_url</var> is a valid <var>URL</var> with <a data-link-type=\"dfn\" data-link-for=\"url\" data-xref-for=\"URL\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url-scheme\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\">scheme</a> \"https\",\n              set <var data-type=\"ordered map\">entry</var>[\"origin\"] to the <a data-link-type=\"dfn\" data-link-for=\"url\" data-xref-for=\"URL\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url-origin\" href=\"https://url.spec.whatwg.org/#concept-url-origin\">origin</a> of <var data-type=\"URL\">origin_url</var>."
            },
            {
              "html": "Else <a data-link-type=\"dfn\" data-link-for=\"iteration\" data-xref-for=\"iteration\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"iteration-continue\" href=\"https://infra.spec.whatwg.org/#iteration-continue\">continue</a>."
            },
            {
              "html": "Validate <var data-type=\"ordered map\">entry</var> using the algorithm from <a data-link-type=\"dfn|abstract-op\" href=\"https://wicg.github.io/manifest-incubations/#dfn-validate-scope-extensions\" class=\"internalDFN\" id=\"ref-for-dfn-validate-scope-extensions-2\">validate scope extensions</a>, given <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a> <var data-type=\"ordered map\">entry</var> and \n              <a data-link-type=\"dfn\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url\" href=\"https://url.spec.whatwg.org/#concept-url\">URL</a> <var data-type=\"URL\">manifest_id</var>."
            },
            {
              "html": "If the previous step returned an error, <a data-link-type=\"dfn\" data-link-for=\"iteration\" data-xref-for=\"iteration\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"iteration-continue\" href=\"https://infra.spec.whatwg.org/#iteration-continue\">continue</a>."
            },
            {
              "html": "Else, set <var data-type=\"ordered map\">entry</var>[\"scope\"] to the returned <a data-link-type=\"dfn\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url\" href=\"https://url.spec.whatwg.org/#concept-url\">URL</a>."
            },
            {
              "html": "<a data-link-type=\"dfn\" data-link-for=\"list\" data-xref-for=\"list\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list-append\" href=\"https://infra.spec.whatwg.org/#list-append\">Append</a> <var data-type=\"ordered map\">entry</var> to <var data-type=\"list\">processedScopeExtensions</var>."
            }
          ]
        }
      ]
    },
    {
      "name": "validate scope extensions",
      "href": "https://wicg.github.io/manifest-incubations/#dfn-validate-scope-extensions",
      "html": "To <dfn id=\"dfn-validate-scope-extensions\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">validate scope extensions</dfn>, given <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a> \n        <var data-type=\"ordered map\">extension</var> and <a data-link-type=\"dfn\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url\" href=\"https://url.spec.whatwg.org/#concept-url\">URL</a> <var data-type=\"URL\">manifest_id</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "Let <a data-link-type=\"dfn\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url\" href=\"https://url.spec.whatwg.org/#concept-url\">URL</a> <var data-type=\"URL\">origin_url</var> be the <a data-link-type=\"dfn\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url\" href=\"https://url.spec.whatwg.org/#concept-url\">URL</a> of the <a data-link-type=\"dfn\" data-link-for=\"url\" data-xref-for=\"URL\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url-origin\" href=\"https://url.spec.whatwg.org/#concept-url-origin\">origin</a>\n          <var data-type=\"ordered map\">extension</var>[\"origin\"]."
        },
        {
          "html": "Let <a data-link-type=\"dfn\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url\" href=\"https://url.spec.whatwg.org/#concept-url\">URL</a> <var data-type=\"URL\">download_url</var> be the result of <a data-link-type=\"dfn\" data-lt=\"URL Parser\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url-parser\" href=\"https://url.spec.whatwg.org/#concept-url-parser\">parsing</a> \"/.well-known/web-app-origin-association\" using \n          <var data-type=\"URL\">origin_url</var> as the base <a data-link-type=\"dfn\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url\" href=\"https://url.spec.whatwg.org/#concept-url\">URL</a>."
        },
        {
          "html": "Let <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a> <var data-type=\"ordered map\">json</var> be the result of a <a data-link-type=\"dfn\" data-cite=\"fetch\" data-cite-path=\"\" data-cite-frag=\"concept-fetch\" href=\"https://fetch.spec.whatwg.org/#concept-fetch\">fetch</a> \n          given <var data-type=\"URL\">download_url</var>."
        },
        {
          "html": "If the <a data-link-type=\"dfn\" data-cite=\"fetch\" data-cite-path=\"\" data-cite-frag=\"concept-fetch\" href=\"https://fetch.spec.whatwg.org/#concept-fetch\">fetch</a> failed, return an error."
        },
        {
          "html": "If <var data-type=\"ordered map\">json</var>[<var data-type=\"URL\">manifest_id</var>] does not <a data-link-type=\"dfn\" data-link-for=\"map\" data-xref-for=\"map\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"map-exists\" href=\"https://infra.spec.whatwg.org/#map-exists\">exist</a> or is not an \n          <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"ordered-map\" href=\"https://infra.spec.whatwg.org/#ordered-map\">ordered map</a>, return an error."
        },
        {
          "html": "Let <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"string\" href=\"https://infra.spec.whatwg.org/#string\">string</a> <var data-type=\"string\">scope</var> be \"/\"."
        },
        {
          "html": "If <var data-type=\"ordered map\">json</var>[<var data-type=\"URL\">manifest_id</var>][\"scope\"] <a data-link-type=\"dfn\" data-link-for=\"map\" data-xref-for=\"map\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"map-exists\" href=\"https://infra.spec.whatwg.org/#map-exists\">exists</a> and is a\n          <a data-link-type=\"dfn\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"string\" href=\"https://infra.spec.whatwg.org/#string\">string</a>, set <var data-type=\"string\">scope</var> to <var data-type=\"ordered map\">json</var>[<var data-type=\"URL\">manifest_id</var>][\"scope\"]."
        },
        {
          "html": "Let <a data-link-type=\"dfn\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url\" href=\"https://url.spec.whatwg.org/#concept-url\">URL</a> <var data-type=\"URL\">resolved_scope</var> be the result of <a data-link-type=\"dfn\" data-lt=\"URL Parser\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url-parser\" href=\"https://url.spec.whatwg.org/#concept-url-parser\">parsing</a> <var data-type=\"string\">scope</var> with <var data-type=\"ordered map\">extension</var>[\"origin\"] as the base \n          <a data-link-type=\"dfn\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url\" href=\"https://url.spec.whatwg.org/#concept-url\">URL</a>."
        },
        {
          "html": "Return <var data-type=\"URL\">resolved_scope</var>."
        }
      ]
    },
    {
      "name": "process the url member of an application",
      "href": "https://wicg.github.io/manifest-incubations/#dfn-process-the-url-member-of-an-application",
      "html": "To <dfn id=\"dfn-process-the-url-member-of-an-application\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">process the <code>url</code> member of an application</dfn>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "If <var>application URL</var> is missing, return null."
        },
        {
          "html": "Otherwise, <a data-link-type=\"dfn\" data-lt=\"URL Parser\" data-cite=\"url\" data-cite-path=\"\" data-cite-frag=\"concept-url-parser\" href=\"https://url.spec.whatwg.org/#concept-url-parser\">parse</a> <var>application URL</var> and if\n          the result is not failure, return the result. Otherwise return null."
        }
      ]
    },
    {
      "name": "present an install prompt",
      "href": "https://wicg.github.io/manifest-incubations/#dfn-present-an-install-prompt",
      "html": "To <dfn data-local-lt=\"presenting an install prompt|presentation of the install prompt\" id=\"dfn-present-an-install-prompt\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">present\n        an install prompt</dfn>:",
      "rationale": "return",
      "steps": [
        {
          "html": "Show some user-agent-specific <abbr title=\"User Interface\">UI</abbr>, asking the user whether to\n        proceed with installing the app. The <var>result</var> of this choice\n        is either \"<a data-link-type=\"idl\" data-xref-type=\"enum-value\" data-link-for=\"AppBannerPromptOutcome\" data-xref-for=\"AppBannerPromptOutcome\" href=\"https://wicg.github.io/manifest-incubations/#dom-appbannerpromptoutcome-accepted\" class=\"internalDFN\" id=\"ref-for-dom-appbannerpromptoutcome-accepted-1\"><code>accepted</code></a>\" or\n        \"<a data-link-type=\"idl\" data-xref-type=\"enum-value\" data-link-for=\"AppBannerPromptOutcome\" data-xref-for=\"AppBannerPromptOutcome\" href=\"https://wicg.github.io/manifest-incubations/#dom-appbannerpromptoutcome-dismissed\" class=\"internalDFN\" id=\"ref-for-dom-appbannerpromptoutcome-dismissed-1\"><code>dismissed</code></a>\"."
        },
        {
          "html": "Return <var>result</var>, and <a data-cite=\"html\" data-cite-path=\"/infrastructure.html\" data-cite-frag=\"in-parallel\" data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel\">in parallel</a>:",
          "rationale": "if",
          "steps": [
            {
              "html": "If <var>result</var> is \"<a data-link-type=\"idl\" data-xref-type=\"enum-value\" data-link-for=\"AppBannerPromptOutcome\" data-xref-for=\"AppBannerPromptOutcome\" href=\"https://wicg.github.io/manifest-incubations/#dom-appbannerpromptoutcome-accepted\" class=\"internalDFN\" id=\"ref-for-dom-appbannerpromptoutcome-accepted-2\"><code>accepted</code></a>\",\n            run the <a href=\"https://wicg.github.io/manifest-incubations/#dfn-steps-to-install-the-web-application\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-steps-to-install-the-web-application-1\">steps to install the web application</a>."
            }
          ]
        }
      ]
    },
    {
      "name": "steps to notify that an install prompt is available",
      "href": "https://wicg.github.io/manifest-incubations/#dfn-steps-to-notify-that-an-install-prompt-is-available",
      "html": "The <dfn id=\"dfn-steps-to-notify-that-an-install-prompt-is-available\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">steps to notify that an install prompt is available</dfn> are\n        given by the following algorithm:",
      "rationale": "wait",
      "steps": [
        {
          "html": "Wait until the <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"Document\" data-cite=\"dom\" data-cite-path=\"\" data-cite-frag=\"document\" href=\"https://dom.spec.whatwg.org/#document\"><code>Document</code></a> of the <a data-cite=\"html\" data-cite-path=\"/document-sequences.html\" data-cite-frag=\"top-level-browsing-context\" data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context\">top-level browsing\n        context</a> is <a data-cite=\"html#completely-loaded\" href=\"https://html.spec.whatwg.org/multipage/#completely-loaded\">completely\n        loaded</a>."
        },
        {
          "html": "If there is already an <a data-lt=\"present an install prompt\" href=\"https://wicg.github.io/manifest-incubations/#dfn-present-an-install-prompt\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-present-an-install-prompt-3\">install prompt being presented</a> or if\n        the <a href=\"https://wicg.github.io/manifest-incubations/#dfn-steps-to-install-the-web-application\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-steps-to-install-the-web-application-2\">steps to install the web application</a> are currently being\n        executed, then abort this step."
        },
        {
          "html": "<a data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"queue-a-task\" data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task\">Queue a task</a> on the <a href=\"https://wicg.github.io/manifest-incubations/#dfn-application-life-cycle-task-source\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-application-life-cycle-task-source-1\">application life-cycle task source</a>\n          to do the following:",
          "rationale": "let",
          "steps": [
            {
              "html": "Let <var>mayShowPrompt</var> be the result of <a data-link-type=\"dfn\" data-cite=\"dom\" data-cite-path=\"\" data-cite-frag=\"concept-event-fire\" href=\"https://dom.spec.whatwg.org/#concept-event-fire\">fire an event</a> named\n            <code>\"beforeinstallprompt\"</code> at the <a data-link-type=\"dfn\" data-cite=\"html\" data-cite-path=\"/document-sequences.html\" data-cite-frag=\"top-level-browsing-context\" href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context\">top-level browsing context</a>'s\n            <a data-link-type=\"dfn\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"concept-relevant-global\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global\">relevant global object</a> using the <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"BeforeInstallPromptEvent\" href=\"https://wicg.github.io/manifest-incubations/#dom-beforeinstallpromptevent\" class=\"internalDFN\" id=\"ref-for-dom-beforeinstallpromptevent-1\"><code>BeforeInstallPromptEvent</code></a>\n            interface, with steps to initialize the <a data-link-type=\"attribute\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"Event\" data-xref-for=\"Event\" data-cite=\"dom\" data-cite-path=\"\" data-cite-frag=\"dom-event-cancelable\" href=\"https://dom.spec.whatwg.org/#dom-event-cancelable\"><code>cancelable</code></a>\n            attribute to <code>true</code>."
            },
            {
              "html": "If <var>mayShowPrompt</var> is true, then the user agent <em class=\"rfc2119\">MAY</em>, <a data-cite=\"html\" data-cite-path=\"/infrastructure.html\" data-cite-frag=\"in-parallel\" data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel\">in\n            parallel</a>, <a href=\"https://wicg.github.io/manifest-incubations/#dfn-request-to-present-an-install-prompt\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-request-to-present-an-install-prompt-1\">request to present an install prompt</a> with\n            <var>event</var>."
            }
          ]
        }
      ]
    },
    {
      "name": "steps to install the web application",
      "href": "https://wicg.github.io/manifest-incubations/#dfn-steps-to-install-the-web-application",
      "html": "The <dfn id=\"dfn-steps-to-install-the-web-application\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">steps to install the web application</dfn> are given by the\n          following algorithm:",
      "rationale": "let",
      "steps": [
        {
          "html": "Let <var>manifest</var> be the manifest of an installable\n          document."
        },
        {
          "html": "Perform an unspecified sequence of actions to attempt to register\n          the web application in the user's operating system (e.g., create\n          shortcuts that launch the web application, register the application\n          in the system uninstall menu, etc.). If the installation fails (which\n          can be for any reason, for example, the OS denying permission to the\n          user agent to add an icon to the home screen of the device), abort\n          these steps."
        },
        {
          "html": "<a data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"queue-a-task\" data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task\">Queue a task</a> on the <a href=\"https://wicg.github.io/manifest-incubations/#dfn-application-life-cycle-task-source\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-application-life-cycle-task-source-2\">application life-cycle task\n            source</a> to <a data-cite=\"dom\" data-cite-path=\"\" data-cite-frag=\"concept-event-fire\" data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-fire\">fire an event</a> named <code>\"appinstalled\"</code> at the\n            <a data-link-type=\"dfn\" data-cite=\"html\" data-cite-path=\"/document-sequences.html\" data-cite-frag=\"top-level-browsing-context\" href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context\">top-level browsing context</a>'s <a data-link-type=\"dfn\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"concept-relevant-global\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global\">relevant global object</a> for\n            which the installation took place."
        }
      ]
    },
    {
      "name": "BeforeInstallPromptEvent/prompt()",
      "href": "https://wicg.github.io/manifest-incubations/#dom-beforeinstallpromptevent-prompt",
      "html": "The <dfn data-export=\"\" data-dfn-type=\"method\" id=\"dom-beforeinstallpromptevent-prompt\" data-idl=\"operation\" data-title=\"prompt\" data-dfn-for=\"BeforeInstallPromptEvent\" data-type=\"Promise\" data-lt=\"prompt()\" data-local-lt=\"BeforeInstallPromptEvent.prompt|BeforeInstallPromptEvent.prompt()|prompt\" tabindex=\"0\" aria-haspopup=\"dialog\"><code>prompt</code></dfn> method, when called, runs the following\n            steps:",
      "rationale": "let",
      "steps": [
        {
          "html": "Let <var>userResponsePromise</var> be\n            <a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"BeforeInstallPromptEvent\" data-xref-for=\"BeforeInstallPromptEvent\" data-lt=\"[[userResponsePromise]]\" href=\"https://wicg.github.io/manifest-incubations/#dfn-userresponsepromise\" class=\"internalDFN\" id=\"ref-for-dfn-userresponsepromise-1\"><code>[[userResponsePromise]]</code></a>."
        },
        {
          "html": "If <var>userResponsePromise</var> is pending:",
          "rationale": "if",
          "steps": [
            {
              "html": "If <a data-link-type=\"dfn\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>.<a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"BeforeInstallPromptEvent\" data-xref-for=\"BeforeInstallPromptEvent\" data-lt=\"[[didPrompt]]\" href=\"https://wicg.github.io/manifest-incubations/#dfn-didprompt\" class=\"internalDFN\" id=\"ref-for-dfn-didprompt-1\"><code>[[didPrompt]]</code></a> is\n                <code>true</code>, terminate this algorithm."
            },
            {
              "html": "If this event's <a data-link-type=\"attribute\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"Event\" data-xref-for=\"Event\" data-cite=\"dom\" data-cite-path=\"\" data-cite-frag=\"dom-event-istrusted\" href=\"https://dom.spec.whatwg.org/#dom-event-istrusted\"><code>isTrusted</code></a> attribute is <code>false</code>,\n                reject <var>userResponsePromise</var> with \"<a data-link-type=\"exception\" data-cite=\"webidl\" data-xref-type=\"exception\" data-cite-path=\"\" data-cite-frag=\"notallowederror\" href=\"https://webidl.spec.whatwg.org/#notallowederror\"><code>NotAllowedError</code></a>\" and\n                terminate this algorithm."
            },
            {
              "html": "Set <a data-link-type=\"dfn\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>.<a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"BeforeInstallPromptEvent\" data-xref-for=\"BeforeInstallPromptEvent\" data-lt=\"[[didPrompt]]\" href=\"https://wicg.github.io/manifest-incubations/#dfn-didprompt\" class=\"internalDFN\" id=\"ref-for-dfn-didprompt-2\"><code>[[didPrompt]]</code></a> to\n                <code>true</code>."
            },
            {
              "html": "<a data-cite=\"html\" data-cite-path=\"/infrastructure.html\" data-cite-frag=\"in-parallel\" data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel\">In parallel</a>, <a href=\"https://wicg.github.io/manifest-incubations/#dfn-request-to-present-an-install-prompt\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-request-to-present-an-install-prompt-2\">request to present an install\n                  prompt</a> with <a data-link-type=\"dfn\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>. Wait, possibly indefinitely, for\n                  the end-user to make a choice."
            }
          ]
        },
        {
          "html": "Return <var>userResponsePromise</var>."
        }
      ]
    },
    {
      "name": "request to present an install prompt",
      "href": "https://wicg.github.io/manifest-incubations/#dfn-request-to-present-an-install-prompt",
      "html": "To <dfn data-noexport=\"\" id=\"dfn-request-to-present-an-install-prompt\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">request to present an install prompt</dfn>\n            with <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"BeforeInstallPromptEvent\" href=\"https://wicg.github.io/manifest-incubations/#dom-beforeinstallpromptevent\" class=\"internalDFN\" id=\"ref-for-dom-beforeinstallpromptevent-6\"><code>BeforeInstallPromptEvent</code></a> <var>event</var>:",
      "rationale": "let",
      "steps": [
        {
          "html": "<a href=\"https://wicg.github.io/manifest-incubations/#dfn-present-an-install-prompt\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-present-an-install-prompt-8\">Present an install prompt</a> and let <var>outcome</var> be the result."
        },
        {
          "html": "Let <var>response</var> be a newly created <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"PromptResponseObject\" href=\"https://wicg.github.io/manifest-incubations/#dom-promptresponseobject\" class=\"internalDFN\" id=\"ref-for-dom-promptresponseobject-3\"><code>PromptResponseObject</code></a>,\n            initializing its <a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"PromptResponseObject\" data-xref-for=\"PromptResponseObject\" href=\"https://wicg.github.io/manifest-incubations/#dom-promptresponseobject-userchoice\" class=\"internalDFN\" id=\"ref-for-dom-promptresponseobject-userchoice-2\"><code>userChoice</code></a> to <var>outcome</var>."
        },
        {
          "html": "<a data-link-type=\"dfn\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"resolve\" href=\"https://webidl.spec.whatwg.org/#resolve\">Resolve</a>\n            <var>event</var>.<a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"BeforeInstallPromptEvent\" data-xref-for=\"BeforeInstallPromptEvent\" data-lt=\"[[userResponsePromise]]\" href=\"https://wicg.github.io/manifest-incubations/#dfn-userresponsepromise\" class=\"internalDFN\" id=\"ref-for-dfn-userresponsepromise-2\"><code>[[userResponsePromise]]</code></a> with\n            <var>response</var>."
        }
      ]
    }
  ]
}